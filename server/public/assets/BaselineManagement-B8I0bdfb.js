import{u as k,t as B,r as T,m as S,v as P,j as e,R as x,C as t,d as c,q as v,B as E,a as n,b as r,T as F,i as L,k as m,l as g,P as b,f,J as O,p as M,n as R}from"./index-CDF1r-gK.js";import{P as q}from"./play-CAoDg4G6.js";const I=()=>{var u,N,p,y;const{toast:h}=k(),w=B();T.useState(null);const{data:a,isLoading:C,error:A}=S({queryKey:["/api/baselines/status"],refetchInterval:3e4}),i=P({mutationFn:async()=>O("/api/baselines/trigger",{method:"POST"}),onSuccess:s=>{var l;h({title:"Baseline Tests Triggered",description:`Successfully triggered ${((l=s.triggered)==null?void 0:l.length)||0} agents`}),w.invalidateQueries({queryKey:["/api/baselines/status"]})},onError:s=>{h({title:"Error",description:"Failed to trigger baseline tests",variant:"destructive"})}}),j=s=>{switch(s){case"success":return e.jsx(R,{className:"h-4 w-4 text-green-500"});case"failure":return e.jsx(v,{className:"h-4 w-4 text-red-500"});case"running":return e.jsx(x,{className:"h-4 w-4 text-blue-500 animate-spin"});default:return e.jsx(M,{className:"h-4 w-4 text-gray-500"})}},o=s=>{switch(s){case"success":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"failure":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300";case"running":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300"}},d=s=>s.replace(/-/g," ").replace(/\b\w/g,l=>l.toUpperCase());return C?e.jsx("div",{className:"container mx-auto p-6",children:e.jsxs("div",{className:"flex items-center justify-center min-h-[400px]",children:[e.jsx(x,{className:"h-8 w-8 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Loading baseline metrics..."})]})}):A?e.jsx("div",{className:"container mx-auto p-6",children:e.jsx(t,{children:e.jsx(c,{className:"pt-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(v,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Error Loading Baseline Data"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Unable to fetch baseline metrics. Please try again."})]})})})}):e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Baseline Test Management"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Monitor and control automated baseline testing across all agents"})]}),e.jsxs(E,{onClick:()=>i.mutate(),disabled:i.isPending,className:"flex items-center gap-2",children:[i.isPending?e.jsx(x,{className:"h-4 w-4 animate-spin"}):e.jsx(q,{className:"h-4 w-4"}),"Trigger All Tests"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(t,{children:[e.jsx(n,{className:"pb-2",children:e.jsx(r,{className:"text-sm font-medium",children:"Total Agents"})}),e.jsx(c,{children:e.jsx("div",{className:"text-2xl font-bold",children:(a==null?void 0:a.totalAgents)||0})})]}),e.jsxs(t,{children:[e.jsx(n,{className:"pb-2",children:e.jsx(r,{className:"text-sm font-medium",children:"Active Agents"})}),e.jsx(c,{children:e.jsx("div",{className:"text-2xl font-bold text-green-600",children:(a==null?void 0:a.activeAgents)||0})})]}),e.jsxs(t,{children:[e.jsx(n,{className:"pb-2",children:e.jsx(r,{className:"text-sm font-medium",children:"Average Accuracy"})}),e.jsx(c,{children:e.jsxs("div",{className:"text-2xl font-bold",children:[((u=a==null?void 0:a.averageAccuracy)==null?void 0:u.toFixed(1))||0,"%"]})})]}),e.jsxs(t,{children:[e.jsx(n,{className:"pb-2",children:e.jsx(r,{className:"text-sm font-medium",children:"Average Confidence"})}),e.jsx(c,{children:e.jsxs("div",{className:"text-2xl font-bold",children:[((a==null?void 0:a.averageConfidence)*100).toFixed(0)||0,"%"]})})]})]}),e.jsxs(F,{defaultValue:"overview",className:"space-y-4",children:[e.jsxs(L,{children:[e.jsx(m,{value:"overview",children:"Overview"}),e.jsx(m,{value:"agents",children:"Agent Details"}),e.jsx(m,{value:"badges",children:"Badge Generator"})]}),e.jsx(g,{value:"overview",className:"space-y-4",children:e.jsxs(t,{children:[e.jsx(n,{children:e.jsx(r,{children:"Agent Performance Overview"})}),e.jsx(c,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:(N=a==null?void 0:a.results)==null?void 0:N.map(s=>e.jsxs(t,{className:"cursor-pointer hover:shadow-md transition-shadow",children:[e.jsx(n,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(r,{className:"text-sm",children:d(s.agentName)}),j(s.status)]})}),e.jsxs(c,{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Accuracy"}),e.jsxs("span",{className:"font-medium",children:[s.accuracy.toFixed(1),"%"]})]}),e.jsx(b,{value:s.accuracy,className:"h-2"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Confidence"}),e.jsxs("span",{className:"font-medium",children:[(s.confidence*100).toFixed(0),"%"]})]}),e.jsx(b,{value:s.confidence*100,className:"h-2"})]}),e.jsxs("div",{className:"flex justify-between items-center text-xs text-gray-500",children:[e.jsxs("span",{children:[s.passed,"/",s.total," tests"]}),e.jsx(f,{className:o(s.status),children:s.status})]})]})]},s.agentName))})})]})}),e.jsx(g,{value:"agents",className:"space-y-4",children:e.jsxs(t,{children:[e.jsx(n,{children:e.jsx(r,{children:"Individual Agent Status"})}),e.jsx(c,{children:e.jsx("div",{className:"space-y-4",children:(p=a==null?void 0:a.results)==null?void 0:p.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[j(s.status),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:d(s.agentName)}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Last updated: ",new Date(s.lastUpdated).toLocaleString()]})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm font-medium",children:[s.accuracy.toFixed(1),"% accuracy"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[s.passed,"/",s.total," tests passed"]})]}),e.jsx(f,{className:o(s.status),children:s.status})]})]},s.agentName))})})]})}),e.jsx(g,{value:"badges",className:"space-y-4",children:e.jsxs(t,{children:[e.jsxs(n,{children:[e.jsx(r,{children:"Generated Badges"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Copy these badge URLs for use in README files"})]}),e.jsx(c,{children:e.jsx("div",{className:"space-y-6",children:(y=a==null?void 0:a.results)==null?void 0:y.map(s=>e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"font-medium",children:d(s.agentName)}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Accuracy Badge"}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx("img",{src:s.badges.accuracy,alt:"Accuracy Badge",className:"h-5"}),e.jsx("input",{type:"text",value:s.badges.accuracy,readOnly:!0,className:"text-xs bg-gray-100 dark:bg-gray-800 p-1 rounded flex-1"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Tests Badge"}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx("img",{src:s.badges.tests,alt:"Tests Badge",className:"h-5"}),e.jsx("input",{type:"text",value:s.badges.tests,readOnly:!0,className:"text-xs bg-gray-100 dark:bg-gray-800 p-1 rounded flex-1"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Confidence Badge"}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx("img",{src:s.badges.confidence,alt:"Confidence Badge",className:"h-5"}),e.jsx("input",{type:"text",value:s.badges.confidence,readOnly:!0,className:"text-xs bg-gray-100 dark:bg-gray-800 p-1 rounded flex-1"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Status Badge"}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx("img",{src:s.badges.status,alt:"Status Badge",className:"h-5"}),e.jsx("input",{type:"text",value:s.badges.status,readOnly:!0,className:"text-xs bg-gray-100 dark:bg-gray-800 p-1 rounded flex-1"})]})]})]})]},s.agentName))})})]})})]})]})};export{I as default};
