import{a4 as _,r as A,j as e,C as c,a as d,b as o,f as O,B as h,cf as H,ah as X,d as x,D as U,u as J,t as W,cg as Y,m as C,v as $,K as R,c as u,P as E,q as Z,T as ee,i as se,k as S,l as k,a3 as ae,X as i,Y as z,_ as K,$ as D,a0 as G,a1 as m,I as g,S as te,J as L}from"./index-B8YngC3q.js";import{S as Q}from"./switch-DBn-T697.js";import{S as I}from"./square-pen-DC-d-6u8.js";import{S as le}from"./save-DK9PuBoI.js";import{T as ne}from"./target-BcgwmnoA.js";import{D as ie}from"./database-CI_RWL3T.js";import{B as re}from"./brain-DEV5rvKH.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=_("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);function de({content:t,onSave:j,title:w="Markdown Editor",editable:T=!0}){const[a,l]=A.useState(!1),[p,n]=A.useState(t),[v,r]=A.useState(!0),y=()=>{j(p),l(!1),r(!0)},F=()=>{n(t),l(!1),r(!0)},M=N=>N.replace(/^# (.*$)/gim,'<h1 class="text-2xl font-bold mb-4">$1</h1>').replace(/^## (.*$)/gim,'<h2 class="text-xl font-semibold mb-3">$1</h2>').replace(/^### (.*$)/gim,'<h3 class="text-lg font-medium mb-2">$1</h3>').replace(/^\- (.*$)/gim,'<li class="ml-4">$1</li>').replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\n\n/g,'</p><p class="mb-2">').replace(/\n/g,"<br>").replace(/^/,'<p class="mb-2">').replace(/$/,"</p>");return e.jsxs(c,{children:[e.jsx(d,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(o,{className:"flex items-center gap-2",children:[w,e.jsxs(O,{variant:"outline",className:"text-xs",children:[t.split(`
`).length," lines"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[!a&&e.jsxs(e.Fragment,{children:[e.jsxs(h,{variant:"outline",size:"sm",onClick:()=>r(!v),children:[v?e.jsx(I,{className:"h-4 w-4"}):e.jsx(H,{className:"h-4 w-4"}),v?"Raw":"Preview"]}),T&&e.jsxs(h,{variant:"outline",size:"sm",onClick:()=>l(!0),children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"Edit"]})]}),a&&e.jsxs(e.Fragment,{children:[e.jsxs(h,{variant:"outline",size:"sm",onClick:F,children:[e.jsx(X,{className:"h-4 w-4 mr-2"}),"Cancel"]}),e.jsxs(h,{size:"sm",onClick:y,children:[e.jsx(le,{className:"h-4 w-4 mr-2"}),"Save"]})]})]})]})}),e.jsx(x,{children:a?e.jsxs("div",{className:"space-y-4",children:[e.jsx(U,{value:p,onChange:N=>n(N.target.value),className:"min-h-[400px] font-mono text-sm",placeholder:"Enter markdown content..."}),e.jsx("div",{className:"text-xs text-gray-500",children:"Supports: # Headers, ## Subheaders, **bold**, - bullet points"})]}):v?e.jsx("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:M(t)}}):e.jsx("pre",{className:"text-sm bg-gray-50 p-4 rounded-lg overflow-auto max-h-[400px] whitespace-pre-wrap",children:t})})]})}function pe({agentId:t}){var P,q;const{toast:j}=J(),w=W(),[,T]=Y(),[a,l]=A.useState({defaultModel:"gpt-4o",temperature:.7,maxTokens:2048,ragEnabled:!0,knowledgeBaseEnabled:!1,systemPrompt:"",ragSettings:{vectorStore:"faiss",chunkSize:1e3,chunkOverlap:200,topK:5},knowledgeBaseSettings:{sparqlEndpoint:"",ontologyFile:"knowledge_base.ttl",queryTimeout:30}}),{data:p}=C({queryKey:[`/api/agents/${t}/readme`]}),{data:n,isLoading:v}=C({queryKey:["/api/baseline-coverage",t],refetchInterval:3e5}),{data:r}=C({queryKey:[`/api/agents/${t}/baseline-questions`]}),{data:y}=C({queryKey:["/api/baseline-exam/badges"]});C({queryKey:[`/api/agents/${t}/config`],onSuccess:s=>{s&&l(s)}});const F=(p==null?void 0:p.content)||`# ${t.charAt(0).toUpperCase()+t.slice(1)} Agent

## Overview
The ${t} agent provides specialized cannabis industry guidance and expertise.

## Core Functionality
1. **Primary Feature**: Core operational guidance
2. **Secondary Feature**: Compliance monitoring
3. **Tertiary Feature**: Performance optimization

## Performance Metrics
- **Accuracy**: 95%+ target
- **Response Time**: <2 seconds
- **Coverage**: Comprehensive domain expertise

## Integration Capabilities
- Multi-agent collaboration
- Real-time data integration
- API connectivity

## Success Criteria
- Zero compliance violations
- 100% operational coverage
- Optimal performance delivery`,M=$({mutationFn:async s=>L(`/api/agents/${t}/readme`,{method:"PUT",body:{content:s}}),onSuccess:()=>{j({title:"README Updated",description:"Agent documentation has been saved successfully"}),w.invalidateQueries({queryKey:["/api/baseline-coverage",t]})},onError:s=>{j({title:"Error",description:s.message||"Failed to save README",variant:"destructive"})}}),N=s=>{M.mutate(s)},B=$({mutationFn:async s=>L(`/api/agents/${t}/config`,{method:"PUT",body:s}),onSuccess:()=>{j({title:"Configuration Updated",description:"Agent configuration has been saved successfully"}),w.invalidateQueries({queryKey:[`/api/agents/${t}/config`]})},onError:s=>{j({title:"Error",description:s.message||"Failed to save configuration",variant:"destructive"})}}),V=()=>{B.mutate(a)},f=(y==null?void 0:y[`${t}-agent`])||{};return e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold",children:[t.charAt(0).toUpperCase()+t.slice(1)," Agent"]}),e.jsx("p",{className:"text-gray-600",children:"Cannabis industry AI agent specialization"})]}),e.jsx(h,{variant:"outline",onClick:()=>T("/agents"),children:"← Back to Agents"})]}),n&&e.jsxs(c,{children:[e.jsxs(d,{children:[e.jsxs(o,{className:"flex items-center gap-2",children:[e.jsx(R,{className:"h-5 w-5"}),"Baseline Coverage Analysis",v&&e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"})]}),e.jsx(u,{children:"AI evaluation of how well baseline questions cover desired functionality"})]}),e.jsxs(x,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-blue-600",children:[n.confidence,"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Confidence"}),e.jsx(E,{value:n.confidence,className:"mt-2"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-green-600",children:[n.coverage,"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Coverage"}),e.jsx(E,{value:n.coverage,className:"mt-2"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-red-600",children:((P=n.gaps)==null?void 0:P.length)||0}),e.jsx("div",{className:"text-sm text-gray-600",children:"Gaps"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-purple-600",children:((q=n.strengths)==null?void 0:q.length)||0}),e.jsx("div",{className:"text-sm text-gray-600",children:"Strengths"})]})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium mb-2",children:"AI Analysis Summary:"}),e.jsx("p",{className:"text-sm text-gray-700",children:n.detailedAnalysis})]}),n.gaps&&n.gaps.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"font-medium mb-2 text-red-700",children:"Identified Gaps:"}),e.jsx("ul",{className:"space-y-1",children:n.gaps.map((s,b)=>e.jsxs("li",{className:"text-sm text-red-600 flex items-start gap-2",children:[e.jsx(Z,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),s]},b))})]}),n.recommendations&&n.recommendations.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"font-medium mb-2 text-blue-700",children:"Recommendations:"}),e.jsx("ul",{className:"space-y-1",children:n.recommendations.map((s,b)=>e.jsxs("li",{className:"text-sm text-blue-600 flex items-start gap-2",children:[e.jsx(ne,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),s]},b))})]})]})]}),e.jsxs(ee,{defaultValue:"readme",className:"space-y-4",children:[e.jsxs(se,{className:"grid w-full grid-cols-5",children:[e.jsx(S,{value:"readme",children:"README"}),e.jsx(S,{value:"baseline",children:"Baseline"}),e.jsx(S,{value:"performance",children:"Performance"}),e.jsx(S,{value:"config",children:"Configuration"}),e.jsx(S,{value:"testing",children:"Testing"})]}),e.jsx(k,{value:"readme",className:"space-y-4",children:e.jsx(de,{content:F,onSave:N,title:`${t} Agent Documentation`,editable:!0})}),e.jsx(k,{value:"baseline",className:"space-y-4",children:e.jsxs(c,{children:[e.jsxs(d,{children:[e.jsx(o,{children:"Baseline Questions"}),e.jsx(u,{children:"Test questions for evaluating agent performance"})]}),e.jsx(x,{children:r&&r.length>0?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:r.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Questions"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:new Set(r.map(s=>s.category)).size}),e.jsx("div",{className:"text-sm text-gray-600",children:"Categories"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:r.filter(s=>s.difficulty==="advanced").length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Advanced"})]})]}),e.jsxs("div",{className:"space-y-2",children:[r.slice(0,5).map((s,b)=>e.jsx("div",{className:"border rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:s.question}),e.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:["Category: ",s.category," | Difficulty: ",s.difficulty]})]}),e.jsx(O,{variant:"outline",children:s.difficulty})]})},b)),r.length>5&&e.jsxs("div",{className:"text-center text-sm text-gray-500",children:["... and ",r.length-5," more questions"]})]})]}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(ae,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("div",{children:"No baseline questions found"}),e.jsx("div",{className:"text-sm",children:"Create baseline.json to get started"})]})})]})}),e.jsx(k,{value:"performance",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(c,{children:[e.jsx(d,{children:e.jsx(o,{className:"text-lg",children:"Accuracy"})}),e.jsxs(x,{children:[e.jsxs("div",{className:"text-3xl font-bold text-green-600",children:[f.accuracy||"0","%"]}),e.jsx(E,{value:parseFloat(f.accuracy||"0"),className:"mt-2"}),e.jsx("div",{className:"text-sm text-gray-600 mt-2",children:"Target: 95%+"})]})]}),e.jsxs(c,{children:[e.jsx(d,{children:e.jsx(o,{className:"text-lg",children:"Response Time"})}),e.jsxs(x,{children:[e.jsxs("div",{className:"text-3xl font-bold text-blue-600",children:[f.responseTime||"0","ms"]}),e.jsx("div",{className:"text-sm text-gray-600 mt-2",children:"Target: <2000ms"})]})]}),e.jsxs(c,{children:[e.jsx(d,{children:e.jsx(o,{className:"text-lg",children:"Reliability"})}),e.jsxs(x,{children:[e.jsxs("div",{className:"text-3xl font-bold text-purple-600",children:[f.reliability||"0","%"]}),e.jsx(E,{value:parseFloat(f.reliability||"0"),className:"mt-2"}),e.jsx("div",{className:"text-sm text-gray-600 mt-2",children:"Target: 99%+"})]})]})]})}),e.jsx(k,{value:"config",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(c,{children:[e.jsxs(d,{children:[e.jsxs(o,{className:"flex items-center gap-2",children:[e.jsx(ce,{className:"h-5 w-5"}),"Model Configuration"]}),e.jsx(u,{children:"Configure AI model settings and parameters"})]}),e.jsxs(x,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"defaultModel",children:"Default Model"}),e.jsxs(z,{value:a.defaultModel,onValueChange:s=>l({...a,defaultModel:s}),children:[e.jsx(K,{children:e.jsx(D,{placeholder:"Select model"})}),e.jsxs(G,{children:[e.jsx(m,{value:"gpt-4o",children:"GPT-4o"}),e.jsx(m,{value:"gpt-4o-mini",children:"GPT-4o Mini"}),e.jsx(m,{value:"claude-3-5-sonnet",children:"Claude 3.5 Sonnet"}),e.jsx(m,{value:"claude-3-haiku",children:"Claude 3 Haiku"}),e.jsx(m,{value:"gemini-1.5-pro",children:"Gemini 1.5 Pro"}),e.jsx(m,{value:"gemini-1.5-flash",children:"Gemini 1.5 Flash"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(i,{htmlFor:"temperature",children:["Temperature: ",a.temperature]}),e.jsx(g,{type:"range",min:"0",max:"2",step:"0.1",value:a.temperature,onChange:s=>l({...a,temperature:parseFloat(s.target.value)}),className:"w-full"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Controls randomness in responses (0 = deterministic, 2 = very creative)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"maxTokens",children:"Max Tokens"}),e.jsx(g,{type:"number",value:a.maxTokens,onChange:s=>l({...a,maxTokens:parseInt(s.target.value)}),placeholder:"2048"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Maximum length of model responses"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"systemPrompt",children:"System Prompt"}),e.jsx(U,{value:a.systemPrompt,onChange:s=>l({...a,systemPrompt:s.target.value}),placeholder:"Enter system prompt for this agent...",className:"min-h-[100px]"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Instructions that define the agent's behavior and expertise"})]})]})]}),e.jsxs(c,{children:[e.jsxs(d,{children:[e.jsxs(o,{className:"flex items-center gap-2",children:[e.jsx(ie,{className:"h-5 w-5"}),"RAG Configuration"]}),e.jsx(u,{children:"Retrieval-Augmented Generation settings"})]}),e.jsxs(x,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Q,{checked:a.ragEnabled,onCheckedChange:s=>l({...a,ragEnabled:s})}),e.jsx(i,{children:"Enable RAG"})]}),a.ragEnabled&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"vectorStore",children:"Vector Store"}),e.jsxs(z,{value:a.ragSettings.vectorStore,onValueChange:s=>l({...a,ragSettings:{...a.ragSettings,vectorStore:s}}),children:[e.jsx(K,{children:e.jsx(D,{placeholder:"Select vector store"})}),e.jsxs(G,{children:[e.jsx(m,{value:"faiss",children:"FAISS"}),e.jsx(m,{value:"chroma",children:"Chroma"}),e.jsx(m,{value:"pinecone",children:"Pinecone"}),e.jsx(m,{value:"weaviate",children:"Weaviate"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"chunkSize",children:"Chunk Size"}),e.jsx(g,{type:"number",value:a.ragSettings.chunkSize,onChange:s=>l({...a,ragSettings:{...a.ragSettings,chunkSize:parseInt(s.target.value)}})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"chunkOverlap",children:"Chunk Overlap"}),e.jsx(g,{type:"number",value:a.ragSettings.chunkOverlap,onChange:s=>l({...a,ragSettings:{...a.ragSettings,chunkOverlap:parseInt(s.target.value)}})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"topK",children:"Top K Results"}),e.jsx(g,{type:"number",value:a.ragSettings.topK,onChange:s=>l({...a,ragSettings:{...a.ragSettings,topK:parseInt(s.target.value)}})}),e.jsx("div",{className:"text-xs text-gray-500",children:"Number of top similar documents to retrieve"})]})]})]})]}),e.jsxs(c,{children:[e.jsxs(d,{children:[e.jsxs(o,{className:"flex items-center gap-2",children:[e.jsx(re,{className:"h-5 w-5"}),"Knowledge Base"]}),e.jsx(u,{children:"SPARQL and ontology settings"})]}),e.jsxs(x,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Q,{checked:a.knowledgeBaseEnabled,onCheckedChange:s=>l({...a,knowledgeBaseEnabled:s})}),e.jsx(i,{children:"Enable Knowledge Base"})]}),a.knowledgeBaseEnabled&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"sparqlEndpoint",children:"SPARQL Endpoint"}),e.jsx(g,{value:a.knowledgeBaseSettings.sparqlEndpoint,onChange:s=>l({...a,knowledgeBaseSettings:{...a.knowledgeBaseSettings,sparqlEndpoint:s.target.value}}),placeholder:"http://localhost:3030/dataset/sparql"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"ontologyFile",children:"Ontology File"}),e.jsx(g,{value:a.knowledgeBaseSettings.ontologyFile,onChange:s=>l({...a,knowledgeBaseSettings:{...a.knowledgeBaseSettings,ontologyFile:s.target.value}}),placeholder:"knowledge_base.ttl"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"queryTimeout",children:"Query Timeout (seconds)"}),e.jsx(g,{type:"number",value:a.knowledgeBaseSettings.queryTimeout,onChange:s=>l({...a,knowledgeBaseSettings:{...a.knowledgeBaseSettings,queryTimeout:parseInt(s.target.value)}})})]})]})]})]}),e.jsxs(c,{children:[e.jsxs(d,{children:[e.jsxs(o,{className:"flex items-center gap-2",children:[e.jsx(te,{className:"h-5 w-5"}),"Configuration Actions"]}),e.jsx(u,{children:"Save and manage agent configuration"})]}),e.jsxs(x,{className:"space-y-4",children:[e.jsx(h,{onClick:V,disabled:B.isPending,className:"w-full",children:B.isPending?"Saving...":"Save Configuration"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(h,{variant:"outline",size:"sm",children:"Export Config"}),e.jsx(h,{variant:"outline",size:"sm",children:"Import Config"})]}),e.jsxs("div",{className:"text-sm text-gray-600 bg-blue-50 p-3 rounded",children:[e.jsx("div",{className:"font-medium mb-1",children:"Configuration Status:"}),e.jsxs("div",{children:["Model: ",a.defaultModel]}),e.jsxs("div",{children:["RAG: ",a.ragEnabled?"Enabled":"Disabled"]}),e.jsxs("div",{children:["Knowledge Base: ",a.knowledgeBaseEnabled?"Enabled":"Disabled"]}),e.jsxs("div",{children:["Temperature: ",a.temperature]})]})]})]})]})}),e.jsx(k,{value:"testing",className:"space-y-4",children:e.jsxs(c,{children:[e.jsxs(d,{children:[e.jsx(o,{children:"Test Management"}),e.jsx(u,{children:"Run and manage baseline tests for this agent"})]}),e.jsx(x,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs(h,{className:"w-full",onClick:()=>T(`/agent/${t}/baseline`),children:[e.jsx(R,{className:"h-4 w-4 mr-2"}),"View Detailed Baseline Testing"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Access comprehensive baseline testing interface with multi-model AI evaluation, performance tracking, and detailed result analysis."})]})})]})})]})]})}export{pe as default};
