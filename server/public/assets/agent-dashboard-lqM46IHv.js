import{a2 as V,e as X,u as Y,r as f,m as g,j as e,B as r,f as o,E as W,C as n,a as l,a3 as F,b as i,d as c,T as Z,i as q,k as N,l as h,w as B,P as v,S as ee,p as se,n as ae}from"./index-CDF1r-gK.js";import{S as D,M as te}from"./sidebar-CLhOKkd8.js";import{C as P}from"./circle-x-f4oyK_p7.js";import{A as _}from"./arrow-left-BApzaTkK.js";import{S as re}from"./save-BBPmqZUn.js";import{S as ne}from"./square-pen-D1rxitn8.js";import{P as z}from"./play-CAoDg4G6.js";import{G as L}from"./git-branch-BC1FKsKt.js";import{A as M}from"./activity-BjdGuAuP.js";import"./database-CRQSCV_c.js";function pe({agentType:I}){var R;const{agentType:G}=V(),t=I||G,{isAuthenticated:O}=X(),{toast:S}=Y(),[j,u]=f.useState("overview"),[Q,E]=f.useState(!1),[m,y]=f.useState(""),[$,b]=f.useState(!1),[w,T]=f.useState(!1),{data:a,isLoading:k,error:C}=g({queryKey:[`/api/agents/${t}/dashboard`],enabled:!!t,queryFn:async()=>{const s=await fetch(`/api/agents/${t}/dashboard`);if(!s.ok)throw new Error(`Failed to fetch agent data: ${s.status} ${s.statusText}`);return s.json()},retry:!1});console.log("AgentDashboard Debug:",{agentType:t,isAuthenticated:O,isLoading:k,hasData:!!a,error:C,apiUrl:`/api/agents/${t}/dashboard`}),g({queryKey:[`/api/agents/${t}/repository-stats`],enabled:!!t,queryFn:async()=>{const s=await fetch(`/api/agents/${t}/repository-stats`);return s.ok?s.json():(console.warn(`Repository stats not available for ${t}`),null)},retry:!1});const{data:d}=g({queryKey:[`/api/agents/${t}/baseline-results`],enabled:!!t,queryFn:async()=>{const s=await fetch(`/api/agents/${t}/baseline-results`);return s.ok?s.json():(console.warn(`Baseline results not available for ${t}`),[])},retry:!1}),{data:x}=g({queryKey:[`/api/agents/${t}/readme`],enabled:!!t,queryFn:async()=>{const s=await fetch(`/api/agents/${t}/readme`);return s.ok?s.json():(console.warn(`README not available for ${t}`),{content:`# ${t} Agent

This agent specializes in cannabis industry operations.

## Overview

Add your agent description here.

## Key Features

- Feature 1
- Feature 2
- Feature 3`})},retry:!1,onSuccess:s=>{y(s.content||"")}}),K=s=>{switch(s){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-red-100 text-red-800";case"development":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},A=s=>s>=90?"text-green-600":s>=80?"text-blue-600":s>=70?"text-yellow-600":"text-red-600",U=s=>{switch(s){case"baseline_exam":return e.jsx(z,{className:"h-4 w-4"});case"self_assessment":return e.jsx(B,{className:"h-4 w-4"});case"github_action":return e.jsx(L,{className:"h-4 w-4"});case"configuration":return e.jsx(ee,{className:"h-4 w-4"});default:return e.jsx(M,{className:"h-4 w-4"})}},H=s=>{switch(s){case"success":return e.jsx(ae,{className:"h-4 w-4 text-green-500"});case"failure":return e.jsx(P,{className:"h-4 w-4 text-red-500"});case"running":return e.jsx(se,{className:"h-4 w-4 text-yellow-500"});default:return e.jsx(M,{className:"h-4 w-4 text-gray-500"})}},J=async()=>{if(!(!t||!m.trim())){T(!0);try{if(!(await fetch(`/api/agents/${t}/readme`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:m})})).ok)throw new Error("Failed to save README");b(!1),S({title:"README saved",description:"Agent documentation has been updated successfully."})}catch{S({title:"Save failed",description:"Failed to save README. Please try again.",variant:"destructive"})}finally{T(!1)}}};return k?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-10 h-10 bg-formul8-green rounded-lg flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"text-white font-bold text-lg",children:"F8"})}),e.jsx("p",{className:"text-formul8-gray",children:"Loading agent dashboard..."})]})}):!a&&!k?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(P,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Agent Not Found"}),e.jsxs("p",{className:"text-gray-600 mb-4",children:["The requested agent dashboard could not be loaded.",C&&e.jsxs("span",{className:"block text-sm mt-2 text-red-600",children:["Error: ",C.message]})]}),e.jsxs(r,{onClick:()=>window.history.back(),children:[e.jsx(_,{className:"h-4 w-4 mr-2"}),"Go Back"]})]})}):a?e.jsxs("div",{className:"min-h-screen flex bg-gray-50",children:[Q&&e.jsxs("div",{className:"fixed inset-0 z-50 lg:hidden",onClick:()=>E(!1),children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-50"}),e.jsx("div",{className:"relative z-10 w-64",children:e.jsx(D,{})})]}),e.jsx("div",{className:"hidden lg:block",children:e.jsx(D,{})}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx("header",{className:"bg-white border-b border-gray-200 px-3 sm:px-6 py-3 sm:py-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-2 sm:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[e.jsx(r,{variant:"ghost",size:"sm",onClick:()=>E(!0),className:"lg:hidden flex-shrink-0",children:e.jsx(te,{className:"h-4 w-4"})}),e.jsxs(r,{variant:"ghost",size:"sm",onClick:()=>window.history.back(),className:"flex-shrink-0",children:[e.jsx(_,{className:"h-4 w-4 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Back"})]}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h1",{className:"text-lg sm:text-2xl font-bold text-formul8-dark truncate",children:a.name}),e.jsx("p",{className:"text-sm sm:text-base text-formul8-gray truncate",children:a.description})]})]}),e.jsxs("div",{className:"flex items-center justify-between sm:justify-end space-x-2",children:[e.jsx(o,{className:K(a.status),children:a.status}),e.jsx("a",{href:`https://github.com/F8ai/${a.repository}`,target:"_blank",rel:"noopener noreferrer",className:"text-gray-600 hover:text-gray-900",children:e.jsx(W,{className:"h-5 w-5"})})]})]})}),e.jsxs("main",{className:"flex-1 p-3 sm:p-6",children:[e.jsxs(n,{className:"mb-4 sm:mb-6",children:[e.jsx(l,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F,{className:"h-5 w-5 text-blue-600"}),e.jsx(i,{children:"Agent Documentation"})]}),e.jsx("div",{className:"flex items-center space-x-2",children:$?e.jsxs(e.Fragment,{children:[e.jsx(r,{size:"sm",variant:"outline",onClick:()=>{b(!1),y((x==null?void 0:x.content)||"")},disabled:w,children:"Cancel"}),e.jsxs(r,{size:"sm",onClick:J,disabled:w,children:[e.jsx(re,{className:"h-4 w-4 mr-2"}),w?"Saving...":"Save"]})]}):e.jsxs(r,{size:"sm",variant:"outline",onClick:()=>b(!0),children:[e.jsx(ne,{className:"h-4 w-4 mr-2"}),"Edit"]})})]})}),e.jsx(c,{children:$?e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Edit the README documentation for this agent. Supports Markdown formatting."}),e.jsx("textarea",{value:m,onChange:s=>y(s.target.value),className:"w-full h-40 sm:h-48 p-3 border border-gray-300 rounded-md font-mono text-sm resize-y",placeholder:"Enter README content in Markdown format..."}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Lines: ",m.split(`
`).length," | Characters: ",m.length]})]}):e.jsx("div",{className:"prose prose-sm max-w-none",children:e.jsx("div",{className:"whitespace-pre-wrap text-sm text-gray-700 bg-gray-50 p-3 rounded border max-h-32 overflow-y-auto",children:m||(x==null?void 0:x.content)||"No documentation available. Click Edit to add content."})})})]}),e.jsxs(Z,{value:j,onValueChange:u,children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"block sm:hidden",children:e.jsxs("div",{className:"flex space-x-1 overflow-x-auto pb-2 scrollbar-hide",children:[e.jsx("button",{onClick:()=>u("overview"),className:`flex-shrink-0 px-4 py-2 text-sm font-medium rounded-md whitespace-nowrap ${j==="overview"?"bg-blue-100 text-blue-700":"text-gray-500 hover:text-gray-700"}`,children:"Overview"}),e.jsx("button",{onClick:()=>window.location.href=`/agent/${t}/baseline`,className:"flex-shrink-0 px-4 py-2 text-sm font-medium rounded-md whitespace-nowrap text-gray-500 hover:text-gray-700",children:"Baseline Editor"}),e.jsx("button",{onClick:()=>window.location.href=`/agent/${t}/results`,className:"flex-shrink-0 px-4 py-2 text-sm font-medium rounded-md whitespace-nowrap text-gray-500 hover:text-gray-700",children:"Test Results"}),e.jsx("button",{onClick:()=>u("performance"),className:`flex-shrink-0 px-4 py-2 text-sm font-medium rounded-md whitespace-nowrap ${j==="performance"?"bg-blue-100 text-blue-700":"text-gray-500 hover:text-gray-700"}`,children:"Performance"}),e.jsx("button",{onClick:()=>u("configuration"),className:`flex-shrink-0 px-4 py-2 text-sm font-medium rounded-md whitespace-nowrap ${j==="configuration"?"bg-blue-100 text-blue-700":"text-gray-500 hover:text-gray-700"}`,children:"Config"}),e.jsx("button",{onClick:()=>u("activity"),className:`flex-shrink-0 px-4 py-2 text-sm font-medium rounded-md whitespace-nowrap ${j==="activity"?"bg-blue-100 text-blue-700":"text-gray-500 hover:text-gray-700"}`,children:"Activity"})]})}),e.jsx("div",{className:"hidden sm:block",children:e.jsxs(q,{className:"grid w-full grid-cols-6",children:[e.jsx(N,{value:"overview",children:"Overview"}),e.jsx(N,{value:"performance",children:"Performance"}),e.jsx(N,{value:"configuration",children:"Config"}),e.jsx(N,{value:"activity",children:"Activity"}),e.jsx(r,{variant:"outline",size:"sm",onClick:()=>window.location.href=`/agent/${t}/baseline`,className:"text-xs",children:"Baseline Editor"}),e.jsx(r,{variant:"outline",size:"sm",onClick:()=>window.location.href=`/agent/${t}/results`,className:"text-xs",children:"Test Results"})]})})]}),e.jsxs(h,{value:"overview",className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:[e.jsxs(n,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>window.location.href=`/agent/${t}/baseline`,children:[e.jsx(l,{className:"pb-2",children:e.jsx(i,{className:"text-sm font-medium",children:"Total Questions"})}),e.jsxs(c,{children:[e.jsx("div",{className:"text-xl sm:text-2xl font-bold text-blue-600",children:(d==null?void 0:d.length)||0}),e.jsx("div",{className:"text-xs text-gray-500",children:"Click to edit baseline questions"})]})]}),e.jsxs(n,{children:[e.jsx(l,{className:"pb-2",children:e.jsx(i,{className:"text-sm font-medium",children:"Confidence"})}),e.jsxs(c,{children:[e.jsxs("div",{className:`text-xl sm:text-2xl font-bold ${A(a.performance.confidence)}`,children:[a.performance.confidence,"%"]}),e.jsx("div",{className:"text-xs text-gray-500",children:a.performance.lastExamDate?new Date(a.performance.lastExamDate).toLocaleDateString():"No exam data"})]})]}),e.jsxs(n,{children:[e.jsx(l,{className:"pb-2",children:e.jsx(i,{className:"text-sm font-medium",children:"Accuracy"})}),e.jsxs(c,{children:[e.jsxs("div",{className:`text-xl sm:text-2xl font-bold ${A(a.performance.accuracy)}`,children:[a.performance.accuracy,"%"]}),e.jsx("div",{className:"text-xs text-gray-500",children:"Last assessment"})]})]}),e.jsxs(n,{children:[e.jsx(l,{className:"pb-2",children:e.jsx(i,{className:"text-sm font-medium",children:"Response Speed"})}),e.jsxs(c,{children:[e.jsxs("div",{className:`text-xl sm:text-2xl font-bold ${A(a.performance.speed)}`,children:[a.performance.speed,"%"]}),e.jsx("div",{className:"text-xs text-gray-500",children:"Performance score"})]})]})]}),e.jsxs(n,{children:[e.jsx(l,{children:e.jsx(i,{children:"Quick Actions"})}),e.jsx(c,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2",children:[e.jsxs(r,{size:"sm",variant:"outline",className:"w-full sm:w-auto",children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Run Baseline Exam"}),e.jsx("span",{className:"sm:hidden",children:"Baseline"})]}),e.jsxs(r,{size:"sm",variant:"outline",className:"w-full sm:w-auto",children:[e.jsx(B,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Self-Assessment"}),e.jsx("span",{className:"sm:hidden",children:"Assessment"})]}),e.jsxs(r,{size:"sm",variant:"outline",className:"w-full sm:w-auto",children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Trigger GitHub Action"}),e.jsx("span",{className:"sm:hidden",children:"GitHub"})]})]})})]})]}),e.jsx(h,{value:"baseline",className:"space-y-4 sm:space-y-6",children:e.jsxs(n,{children:[e.jsxs(l,{children:[e.jsx(i,{children:"Baseline Questions & Answers"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Complete view of all ",(d==null?void 0:d.length)||0," baseline questions with full answers and AI responses"]})]}),e.jsx(c,{children:d&&d.length>0?e.jsx("div",{className:"space-y-6",children:d.map((s,p)=>e.jsx("div",{className:"border rounded-lg p-4 space-y-4",children:e.jsx("div",{className:"flex items-start justify-between gap-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(o,{variant:"outline",className:"text-xs",children:s.category||"General"}),e.jsx(o,{variant:"secondary",className:`text-xs ${s.difficulty==="advanced"?"bg-red-100 text-red-800":s.difficulty==="intermediate"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:s.difficulty||"basic"}),s.state&&e.jsx(o,{variant:"outline",className:"text-xs",children:s.state})]}),e.jsx("h4",{className:"font-medium text-sm mb-2",children:"Question:"}),e.jsx("p",{className:"text-sm leading-relaxed mb-4",children:s.question}),e.jsx("h4",{className:"font-medium text-sm mb-1",children:"Expected Answer:"}),e.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed mb-4 bg-muted/30 p-3 rounded",children:s.expected_answer}),s.agent_response&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm mb-1",children:"AI Response:"}),e.jsx("p",{className:"text-xs bg-blue-50 p-3 rounded leading-relaxed",children:s.agent_response}),s.ai_grade&&e.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[e.jsxs(o,{variant:s.ai_grade>=80?"default":s.ai_grade>=60?"secondary":"destructive",className:"text-xs",children:["AI Grade: ",s.ai_grade,"%"]}),s.response_time&&e.jsxs("span",{className:"text-xs text-muted-foreground",children:["Response time: ",(s.response_time/1e3).toFixed(1),"s"]})]})]})]})})},s.id||p))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(F,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Baseline Questions Available"}),e.jsx("p",{className:"text-muted-foreground",children:"No baseline questions found for this agent."})]})})]})}),e.jsx(h,{value:"performance",className:"space-y-6",children:e.jsxs(n,{children:[e.jsx(l,{children:e.jsx(i,{children:"Performance Metrics"})}),e.jsx(c,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Baseline Score"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[a.performance.baseline,"%"]})]}),e.jsx(v,{value:a.performance.baseline,className:"h-2"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Confidence"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[a.performance.confidence,"%"]})]}),e.jsx(v,{value:a.performance.confidence,className:"h-2"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Accuracy"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[a.performance.accuracy,"%"]})]}),e.jsx(v,{value:a.performance.accuracy,className:"h-2"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Speed"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[a.performance.speed,"%"]})]}),e.jsx(v,{value:a.performance.speed,className:"h-2"})]})]})})]})}),e.jsx(h,{value:"activity",className:"space-y-4 sm:space-y-6",children:e.jsxs(n,{children:[e.jsx(l,{children:e.jsx(i,{children:"Recent Activity"})}),e.jsx(c,{children:e.jsx("div",{className:"space-y-3 sm:space-y-4",children:((R=a.recentActivity)==null?void 0:R.map((s,p)=>e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-2 sm:space-y-0 sm:space-x-4 p-3 sm:p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3 sm:flex-shrink-0",children:[U(s.action),e.jsx("span",{className:"font-medium text-sm sm:text-base",children:s.action.replace("_"," ")})]}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-1 sm:space-y-0",children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:s.details}),e.jsxs("div",{className:"flex items-center space-x-2",children:[H(s.status),e.jsx("span",{className:"text-xs sm:text-sm text-gray-500",children:new Date(s.timestamp).toLocaleString()})]})]})})]},p)))||e.jsx("p",{className:"text-center text-gray-500 py-8",children:"No recent activity"})})})]})}),e.jsx(h,{value:"configuration",className:"space-y-4 sm:space-y-6",children:e.jsxs(n,{children:[e.jsx(l,{children:e.jsx(i,{children:"Agent Configuration"})}),e.jsx(c,{children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium block mb-1",children:"LLM Provider"}),e.jsx("div",{className:"p-2 bg-gray-50 rounded text-sm",children:a.configuration.llmProvider})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium block mb-1",children:"Model"}),e.jsx("div",{className:"p-2 bg-gray-50 rounded text-sm",children:a.configuration.model})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium block mb-1",children:"RAG Enabled"}),e.jsx("div",{className:"p-2 bg-gray-50 rounded text-sm",children:a.configuration.ragEnabled?"Yes":"No"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium block mb-1",children:"Tools"}),e.jsx("div",{className:"p-2 bg-gray-50 rounded",children:e.jsx("div",{className:"flex flex-wrap gap-1",children:a.configuration.tools.map((s,p)=>e.jsx(o,{variant:"secondary",className:"text-xs",children:s},p))})})]})]})})})]})}),e.jsx(h,{value:"repository",className:"space-y-6",children:e.jsxs(n,{children:[e.jsx(l,{children:e.jsx(i,{children:"Repository Information"})}),e.jsx(c,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Repository"}),e.jsx("p",{className:"text-sm text-gray-600",children:e.jsxs("a",{href:`https://github.com/F8ai/${a.repository}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800",children:["F8ai/",a.repository]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Last Updated"}),e.jsx("p",{className:"text-sm text-gray-600",children:new Date(a.lastUpdated).toLocaleString()})]}),a.repositoryStats&&e.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold",children:a.repositoryStats.stars}),e.jsx("div",{className:"text-sm text-gray-600",children:"Stars"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold",children:a.repositoryStats.forks}),e.jsx("div",{className:"text-sm text-gray-600",children:"Forks"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold",children:a.repositoryStats.issues}),e.jsx("div",{className:"text-sm text-gray-600",children:"Issues"})]})]})]})})]})})]})]})]})]}):null}export{pe as default};
