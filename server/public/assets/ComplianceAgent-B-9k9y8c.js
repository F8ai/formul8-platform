import{a4 as pe,r as N,u as oe,t as xe,cg as fe,v as Z,j as e,C as x,a as p,b as f,c as L,d as h,X as G,Y as P,_ as $,$ as E,a0 as q,a1 as d,I as me,D as be,z as te,f as C,B as S,S as ve,m as Y,af as he,P as Ne,p as ye,n as ee,q as se,cf as ue,R as ae,ah as we,L as je,E as ke,K as re,T as Ce,i as Te,k as D,l as O,a3 as Se,o as Fe,J as ne}from"./index-CDF1r-gK.js";import{C as J}from"./checkbox-BkLwFIoH.js";import{P as ie}from"./play-CAoDg4G6.js";import{T as Ae,a as Ie,b as le,c as I,d as _e,e as _}from"./table-BtQ_kS4p.js";import{A as Le}from"./arrow-left-right-Dqgn2uRc.js";import{M as ce}from"./minus-C2shxhS8.js";import{T as Pe}from"./trending-up-nueEWtNi.js";import{T as $e}from"./trending-down-DAxZ4qVS.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=pe("GitCompare",[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["path",{d:"M11 18H8a2 2 0 0 1-2-2V9",key:"19pyzm"}]]);function Ee({agentType:u,onTestStarted:a}){const[r,b]=N.useState({model:"gpt-4o",state:"all",ragEnabled:!0,toolsEnabled:!0,kbEnabled:!0,customPrompt:"",questionLimit:""}),[v,y]=N.useState(!1),[j,T]=N.useState({current:0,total:0}),{toast:m}=oe(),t=xe(),[,i]=fe(),g=Z({mutationFn:async c=>{const s=await fetch("/api/baseline-testing/run-public",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({agentType:u,...c,state:c.state==="all"?void 0:c.state,questionLimit:c.questionLimit?parseInt(c.questionLimit):void 0})});if(!s.ok)throw new Error("Failed to run test");return s.json()},onSuccess:c=>{m({title:"Baseline Test Started",description:`Test run ${c.runId} started successfully. Navigating to results page...`});const s=r.model.replace("gpt-4o","gpt4o").replace("claude-3-5-sonnet-20241022","claude35sonnet"),F=r.state!=="all"?r.state:"",M=F?`${F}-${s}`:`${c.runId}`;i(`/agent/${u}/baseline-${M}`),a&&a(c.runId),y(!0),t.invalidateQueries({queryKey:["/api/baseline-testing/runs"]})},onError:c=>{m({title:"Error",description:c.message||"Failed to start baseline test",variant:"destructive"})}}),n=()=>{if(!r.model){m({title:"Error",description:"Please select a model",variant:"destructive"});return}g.mutate(r)},w=(c,s)=>{b(F=>({...F,[c]:s}))};return e.jsx("div",{className:"space-y-6",children:e.jsxs(x,{children:[e.jsxs(p,{children:[e.jsxs(f,{className:"flex items-center",children:[e.jsx(ie,{className:"w-5 h-5 mr-2"}),"Run Baseline Test"]}),e.jsxs(L,{children:["Execute baseline test suite for the ",u," agent with custom configuration"]})]}),e.jsxs(h,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(G,{htmlFor:"model",children:"AI Model"}),e.jsxs(P,{value:r.model,onValueChange:c=>w("model",c),children:[e.jsx($,{children:e.jsx(E,{placeholder:"Select model"})}),e.jsxs(q,{children:[e.jsx(d,{value:"gpt-4o",children:"GPT-4o"}),e.jsx(d,{value:"gpt-4o-mini",children:"GPT-4o Mini"}),e.jsx(d,{value:"claude-3-5-sonnet-20241022",children:"Claude 3.5 Sonnet"}),e.jsx(d,{value:"claude-3-5-haiku-20241022",children:"Claude 3.5 Haiku"}),e.jsx(d,{value:"gemini-1.5-pro",children:"Gemini 1.5 Pro"}),e.jsx(d,{value:"gemini-1.5-flash",children:"Gemini 1.5 Flash"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(G,{htmlFor:"state",children:"State Filter (Optional)"}),e.jsxs(P,{value:r.state,onValueChange:c=>w("state",c),children:[e.jsx($,{children:e.jsx(E,{placeholder:"All states"})}),e.jsxs(q,{children:[e.jsx(d,{value:"all",children:"All States"}),e.jsx(d,{value:"CA",children:"California"}),e.jsx(d,{value:"CO",children:"Colorado"}),e.jsx(d,{value:"WA",children:"Washington"}),e.jsx(d,{value:"OR",children:"Oregon"}),e.jsx(d,{value:"NV",children:"Nevada"}),e.jsx(d,{value:"AZ",children:"Arizona"}),e.jsx(d,{value:"MA",children:"Massachusetts"}),e.jsx(d,{value:"IL",children:"Illinois"}),e.jsx(d,{value:"NY",children:"New York"}),e.jsx(d,{value:"NJ",children:"New Jersey"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(G,{htmlFor:"questionLimit",children:"Question Limit (Optional)"}),e.jsx(me,{id:"questionLimit",type:"number",placeholder:"All questions",value:r.questionLimit,onChange:c=>w("questionLimit",c.target.value)})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(J,{id:"rag",checked:r.ragEnabled,onCheckedChange:c=>w("ragEnabled",c)}),e.jsx(G,{htmlFor:"rag",children:"Enable RAG (Retrieval-Augmented Generation)"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(J,{id:"tools",checked:r.toolsEnabled,onCheckedChange:c=>w("toolsEnabled",c)}),e.jsx(G,{htmlFor:"tools",children:"Enable Agent Tools"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(J,{id:"kb",checked:r.kbEnabled,onCheckedChange:c=>w("kbEnabled",c)}),e.jsx(G,{htmlFor:"kb",children:"Enable Knowledge Base"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(G,{htmlFor:"customPrompt",children:"Custom System Prompt (Optional)"}),e.jsx(be,{id:"customPrompt",placeholder:"Enter custom system prompt to override default...",value:r.customPrompt,onChange:c=>w("customPrompt",c.target.value),rows:4})]}),v&&e.jsx(x,{className:"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800",children:e.jsxs(h,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"w-5 h-5 text-blue-600 animate-pulse"}),e.jsx("span",{className:"font-medium text-blue-800 dark:text-blue-200",children:"Test Running..."})]}),e.jsxs(C,{variant:"outline",className:"bg-blue-100 dark:bg-blue-900",children:[j.current,"/",j.total]})]}),e.jsx("div",{className:"mt-2 w-full bg-blue-200 dark:bg-blue-800 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${j.total>0?j.current/j.total*100:0}%`}})})]})}),e.jsx("div",{className:"flex justify-end",children:e.jsx(S,{onClick:n,disabled:g.isPending||v,className:"w-full md:w-auto",children:g.isPending?e.jsxs(e.Fragment,{children:[e.jsx(ve,{className:"w-4 h-4 mr-2 animate-spin"}),"Starting Test..."]}):v?e.jsxs(e.Fragment,{children:[e.jsx(te,{className:"w-4 h-4 mr-2 animate-pulse"}),"Test Running..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ie,{className:"w-4 h-4 mr-2"}),"Run Baseline Test"]})})})]})]})})}function H({cost:u,tokens:a,variant:r="secondary",showTokens:b=!0}){const v=m=>m===0?"FREE":m<.001?`$${(m*1e3).toFixed(3)}‰`:`$${m.toFixed(4)}`,y=m=>m<1e3?m.toString():m<1e6?`${(m/1e3).toFixed(1)}K`:`${(m/1e6).toFixed(1)}M`,j=v(u),T=a?y(a):"";return e.jsxs(C,{variant:u===0?"default":r,className:"text-xs",children:[j,b&&a&&a>0&&e.jsxs("span",{className:"ml-1 opacity-75",children:["(",T," tokens)"]})]})}function de({inputTokens:u,outputTokens:a,totalTokens:r,estimatedCost:b,model:v}){const y=j=>j<1e3?j.toString():j<1e6?`${(j/1e3).toFixed(1)}K`:`${(j/1e6).toFixed(1)}M`;return e.jsxs("div",{className:"flex flex-col gap-1 text-xs text-gray-600 dark:text-gray-400",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Input tokens:"}),e.jsx("span",{children:y(u)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Output tokens:"}),e.jsx("span",{children:y(a)})]}),e.jsxs("div",{className:"flex justify-between font-medium",children:[e.jsx("span",{children:"Total tokens:"}),e.jsx("span",{children:y(r)})]}),e.jsxs("div",{className:"flex justify-between font-medium",children:[e.jsx("span",{children:"Estimated cost:"}),e.jsx(H,{cost:b,showTokens:!1})]}),v&&e.jsxs("div",{className:"flex justify-between text-xs opacity-75",children:[e.jsx("span",{children:"Model:"}),e.jsx("span",{children:v})]})]})}function qe({agentType:u,activeTestRun:a}){var B,R,z,K;const[r,b]=N.useState("all"),[v,y]=N.useState("all"),[j,T]=N.useState("all"),[m,t]=N.useState(""),[i,g]=N.useState(null),{data:n=[],isLoading:w,refetch:c}=Y({queryKey:["/api/baseline-testing/runs",u],queryFn:async()=>{const l=await fetch(`/api/baseline-testing/runs?agentType=${u}`);if(!l.ok)throw new Error("Failed to fetch test runs");return l.json()}});N.useEffect(()=>{if(!a)return;const l=async()=>{try{const A=await fetch(`/api/baseline-testing/progress/${a}`);if(A.ok){const Q=await A.json();g(Q),Q.status==="running"?setTimeout(l,2e3):(c(),g(null))}}catch(A){console.error("Error polling progress:",A)}};l()},[a,c]);const s=n.filter(l=>!(r!=="all"&&!l.model.toLowerCase().includes(r.toLowerCase())||v!=="all"&&l.state!==v||j!=="all"&&l.status!==j||m&&!l.model.toLowerCase().includes(m.toLowerCase()))),F=l=>{switch(l){case"completed":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"running":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"failed":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}},M=()=>{b("all"),y("all"),T("all"),t("")},V=r!=="all"||v!=="all"||j!=="all"||m;return e.jsxs("div",{className:"space-y-6",children:[i&&e.jsxs(x,{className:"border-blue-200 bg-blue-50 dark:bg-blue-900/20",children:[e.jsxs(p,{children:[e.jsxs(f,{className:"flex items-center space-x-2",children:[e.jsx(he,{className:"w-5 h-5 animate-spin text-blue-600"}),e.jsxs("span",{children:["Live Test Progress - Run #",a]})]}),e.jsx(L,{children:"Real-time OpenAI testing with question/answer grading"})]}),e.jsxs(h,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{children:["Progress: ",i.completedQuestions||0," / ",i.totalQuestions||0]}),e.jsxs("span",{children:[Math.round((i.completedQuestions||0)/(i.totalQuestions||1)*100),"%"]})]}),e.jsx(Ne,{value:(i.completedQuestions||0)/(i.totalQuestions||1)*100})]}),i.currentQuestion&&e.jsx(x,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(C,{variant:"outline",children:["Question ",i.currentQuestion.id]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ye,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Processing..."})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium mb-2",children:"Question:"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:i.currentQuestion.question})]}),i.currentQuestion.answer&&e.jsxs("div",{children:[e.jsx("p",{className:"font-medium mb-2",children:"AI Response:"}),e.jsx("p",{className:"text-sm bg-gray-50 dark:bg-gray-800 p-3 rounded",children:i.currentQuestion.answer})]}),i.currentQuestion.grade&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ee,{className:"w-4 h-4 text-green-600"}),e.jsxs("span",{className:"text-sm font-medium",children:["Grade: ",i.currentQuestion.grade.accuracy,"% (Confidence: ",i.currentQuestion.grade.confidence,"%)"]})]})]})}),i.recentResults&&i.recentResults.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"font-medium",children:"Recent Results:"}),e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:i.recentResults.slice(-5).map((l,A)=>{var Q,U,o;return e.jsxs("div",{className:"flex items-center justify-between p-2 bg-white dark:bg-gray-800 rounded text-sm",children:[e.jsxs("span",{children:["Q",l.questionId]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[((Q=l.grade)==null?void 0:Q.accuracy)>=80?e.jsx(ee,{className:"w-4 h-4 text-green-600"}):((U=l.grade)==null?void 0:U.accuracy)>=60?e.jsx(se,{className:"w-4 h-4 text-yellow-600"}):e.jsx(se,{className:"w-4 h-4 text-red-600"}),e.jsxs("span",{children:[(o=l.grade)==null?void 0:o.accuracy,"%"]})]})]},A)})})]}),i.metrics&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 pt-2 border-t",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-lg font-semibold",children:[((B=i.metrics.avgAccuracy)==null?void 0:B.toFixed(1))||0,"%"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Avg Accuracy"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-lg font-semibold",children:[((R=i.metrics.avgConfidence)==null?void 0:R.toFixed(1))||0,"%"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Avg Confidence"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-lg font-semibold",children:[((z=i.metrics.avgResponseTime)==null?void 0:z.toFixed(1))||0,"s"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Avg Time"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-lg font-semibold",children:["$",((K=i.metrics.totalCost)==null?void 0:K.toFixed(4))||0]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Cost"})]})]})]})]}),e.jsxs(x,{children:[e.jsxs(p,{children:[e.jsxs(f,{className:"flex items-center",children:[e.jsx(ue,{className:"w-5 h-5 mr-2"}),"Baseline Test Results"]}),e.jsxs(L,{children:["View and analyze baseline test results for the ",u," agent"]})]}),e.jsxs(h,{children:[e.jsxs("div",{className:"flex flex-wrap gap-4 mb-6 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("div",{className:"flex-1 min-w-[200px]",children:e.jsx(me,{placeholder:"Search by model...",value:m,onChange:l=>t(l.target.value),className:"w-full"})}),e.jsxs(P,{value:r,onValueChange:b,children:[e.jsx($,{className:"w-[180px]",children:e.jsx(E,{placeholder:"Filter by model"})}),e.jsxs(q,{children:[e.jsx(d,{value:"all",children:"All Models"}),e.jsx(d,{value:"gpt-4o",children:"GPT-4o"}),e.jsx(d,{value:"gpt-4o-mini",children:"GPT-4o Mini"}),e.jsx(d,{value:"claude",children:"Claude"}),e.jsx(d,{value:"gemini",children:"Gemini"})]})]}),e.jsxs(P,{value:v,onValueChange:y,children:[e.jsx($,{className:"w-[140px]",children:e.jsx(E,{placeholder:"Filter by state"})}),e.jsxs(q,{children:[e.jsx(d,{value:"all",children:"All States"}),e.jsx(d,{value:"CA",children:"California"}),e.jsx(d,{value:"CO",children:"Colorado"}),e.jsx(d,{value:"WA",children:"Washington"}),e.jsx(d,{value:"OR",children:"Oregon"}),e.jsx(d,{value:"NY",children:"New York"})]})]}),e.jsxs(P,{value:j,onValueChange:T,children:[e.jsx($,{className:"w-[140px]",children:e.jsx(E,{placeholder:"Filter by status"})}),e.jsxs(q,{children:[e.jsx(d,{value:"all",children:"All Status"}),e.jsx(d,{value:"completed",children:"Completed"}),e.jsx(d,{value:"running",children:"Running"}),e.jsx(d,{value:"failed",children:"Failed"})]})]}),e.jsxs(S,{variant:"outline",onClick:()=>c(),size:"sm",children:[e.jsx(ae,{className:"w-4 h-4 mr-2"}),"Refresh"]}),V&&e.jsxs(S,{variant:"outline",onClick:M,size:"sm",children:[e.jsx(we,{className:"w-4 h-4 mr-2"}),"Clear Filters"]})]}),w?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(ae,{className:"w-6 h-6 animate-spin mr-2"}),"Loading test results..."]}):s.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:V?"No test runs match the current filters":"No baseline test runs found"}):e.jsx("div",{className:"rounded-md border",children:e.jsxs(Ae,{children:[e.jsx(Ie,{children:e.jsxs(le,{children:[e.jsx(I,{children:"Model"}),e.jsx(I,{children:"State"}),e.jsx(I,{children:"Status"}),e.jsx(I,{children:"Questions"}),e.jsx(I,{children:"Accuracy"}),e.jsx(I,{children:"Confidence"}),e.jsx(I,{children:"Cost"}),e.jsx(I,{children:"Date"}),e.jsx(I,{children:"Actions"})]})}),e.jsx(_e,{children:s.map(l=>e.jsxs(le,{children:[e.jsx(_,{className:"font-medium",children:l.model}),e.jsx(_,{children:l.state?e.jsx(C,{variant:"outline",children:l.state}):e.jsx("span",{className:"text-gray-400",children:"All"})}),e.jsx(_,{children:e.jsx(C,{className:F(l.status),children:l.status})}),e.jsxs(_,{children:[e.jsx("span",{className:"text-green-600 font-medium",children:l.successfulTests}),e.jsxs("span",{className:"text-gray-400",children:["/",l.totalQuestions]})]}),e.jsx(_,{children:l.avgAccuracy?e.jsxs("span",{className:`font-medium ${l.avgAccuracy>=80?"text-green-600":l.avgAccuracy>=60?"text-yellow-600":"text-red-600"}`,children:[l.avgAccuracy.toFixed(1),"%"]}):e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx(_,{children:l.avgConfidence?e.jsxs("span",{className:"font-medium",children:[l.avgConfidence.toFixed(1),"%"]}):e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx(_,{children:l.totalCost?e.jsx(H,{cost:l.totalCost}):e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx(_,{className:"text-sm text-gray-500",children:new Date(l.createdAt).toLocaleDateString()}),e.jsx(_,{children:e.jsx("div",{className:"flex space-x-2",children:e.jsx(je,{href:`/agent/${u}/baseline-${l.state||"all"}-${l.model.replace(/[^a-zA-Z0-9]/g,"")}`,children:e.jsxs(S,{variant:"outline",size:"sm",children:[e.jsx(ke,{className:"w-4 h-4 mr-1"}),"View"]})})})})]},l.id))})]})})]})]})]})}function Qe({results:u,selectedResultA:a,selectedResultB:r,onResultAChange:b,onResultBChange:v}){const y=(t,i)=>{if(t==null)return"N/A";switch(i){case"percentage":return`${typeof t=="number"?t.toFixed(1):t}%`;case"currency":const g=typeof t=="number"?t:parseFloat(t.toString());return g===0?"FREE":g<.001?`$${(g*1e3).toFixed(3)}‰`:`$${g.toFixed(4)}`;case"tokens":const n=typeof t=="number"?t:parseInt(t.toString());return n<1e3?n.toString():n<1e6?`${(n/1e3).toFixed(1)}K`:`${(n/1e6).toFixed(1)}M`;case"time":return`${typeof t=="number"?t.toFixed(2):t}s`;case"number":return typeof t=="number"?t.toFixed(1):t.toString();default:return t.toString()}},j=(t,i,g=!0)=>{if(t===void 0||i===void 0)return e.jsx(ce,{className:"h-4 w-4 text-gray-400"});const n=typeof t=="number"?t:parseFloat(t.toString()),w=typeof i=="number"?i:parseFloat(i.toString());return n===w?e.jsx(ce,{className:"h-4 w-4 text-gray-400"}):(g?n>w:n<w)?e.jsx(Pe,{className:"h-4 w-4 text-green-500"}):e.jsx($e,{className:"h-4 w-4 text-red-500"})},T=()=>!a||!r?[]:[{label:"AI Grade",valueA:a.aiGrade||0,valueB:r.aiGrade||0,format:"number",higherIsBetter:!0},{label:"Accuracy",valueA:a.accuracy||0,valueB:r.accuracy||0,format:"percentage",higherIsBetter:!0},{label:"Confidence",valueA:a.confidence||0,valueB:r.confidence||0,format:"percentage",higherIsBetter:!0},{label:"Response Time",valueA:a.responseTime||0,valueB:r.responseTime||0,format:"time",higherIsBetter:!1},{label:"Total Tokens",valueA:a.totalTokens||0,valueB:r.totalTokens||0,format:"tokens",higherIsBetter:!1},{label:"Input Tokens",valueA:a.inputTokens||0,valueB:r.inputTokens||0,format:"tokens",higherIsBetter:!1},{label:"Output Tokens",valueA:a.outputTokens||0,valueB:r.outputTokens||0,format:"tokens",higherIsBetter:!1},{label:"Response Cost",valueA:a.estimatedCost||0,valueB:r.estimatedCost||0,format:"currency",higherIsBetter:!1},{label:"AI Grading Tokens",valueA:a.aiGradingTotalTokens||0,valueB:r.aiGradingTotalTokens||0,format:"tokens",higherIsBetter:!1},{label:"AI Grading Cost",valueA:a.aiGradingEstimatedCost||0,valueB:r.aiGradingEstimatedCost||0,format:"currency",higherIsBetter:!1}],m=t=>(t.estimatedCost||0)+(t.aiGradingEstimatedCost||0);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(x,{children:[e.jsxs(p,{children:[e.jsxs(f,{className:"flex items-center gap-2",children:[e.jsx(Le,{className:"h-5 w-5"}),"Result Comparison"]}),e.jsx(L,{children:"Compare two baseline test results side by side to analyze performance, costs, and accuracy"})]}),e.jsx(h,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Result A"}),e.jsxs(P,{value:(a==null?void 0:a.id.toString())||"",onValueChange:t=>{const i=u.find(g=>g.id.toString()===t);i&&b(i)},children:[e.jsx($,{children:e.jsx(E,{placeholder:"Select first result"})}),e.jsx(q,{children:u.map(t=>e.jsxs(d,{value:t.id.toString(),children:[t.questionId," - Grade: ",t.aiGrade||"N/A"]},t.id))})]})]}),a&&e.jsx(x,{className:"border-blue-200 bg-blue-50/30",children:e.jsx(h,{className:"pt-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(C,{variant:"outline",children:a.category}),e.jsx(C,{variant:"secondary",children:a.difficulty})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Question:"}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:a.question})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Total Cost:"}),e.jsx(H,{cost:m(a),showTokens:!1})]})]})})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Result B"}),e.jsxs(P,{value:(r==null?void 0:r.id.toString())||"",onValueChange:t=>{const i=u.find(g=>g.id.toString()===t);i&&v(i)},children:[e.jsx($,{children:e.jsx(E,{placeholder:"Select second result"})}),e.jsx(q,{children:u.map(t=>e.jsxs(d,{value:t.id.toString(),children:[t.questionId," - Grade: ",t.aiGrade||"N/A"]},t.id))})]})]}),r&&e.jsx(x,{className:"border-green-200 bg-green-50/30",children:e.jsx(h,{className:"pt-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(C,{variant:"outline",children:r.category}),e.jsx(C,{variant:"secondary",children:r.difficulty})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Question:"}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:r.question})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Total Cost:"}),e.jsx(H,{cost:m(r),showTokens:!1})]})]})})})]})]})})]}),a&&r&&e.jsxs(x,{children:[e.jsxs(p,{children:[e.jsx(f,{children:"Performance Comparison"}),e.jsx(L,{children:"Side-by-side metrics comparison with performance indicators"})]}),e.jsx(h,{children:e.jsx("div",{className:"space-y-4",children:T().map((t,i)=>e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-100 last:border-b-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[j(t.valueA,t.valueB,t.higherIsBetter),e.jsx("span",{className:"font-medium",children:t.label})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:y(t.valueA,t.format)}),e.jsx("div",{className:"text-xs text-gray-500",children:"Result A"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-green-600 font-medium",children:y(t.valueB,t.format)}),e.jsx("div",{className:"text-xs text-gray-500",children:"Result B"})]})]})]},i))})})]}),a&&r&&e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs(x,{className:"border-blue-200",children:[e.jsxs(p,{children:[e.jsx(f,{className:"text-blue-700",children:"Result A Response"}),e.jsxs(L,{children:["Model: ",a.aiGradingModel||"Unknown"," • Grade: ",a.aiGrade||"N/A","/10"]})]}),e.jsx(h,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Agent Response:"}),e.jsx("div",{className:"bg-blue-50 p-3 rounded text-sm max-h-32 overflow-y-auto",children:a.agentResponse||"No response available"})]}),(a.inputTokens||a.outputTokens)&&e.jsx(de,{inputTokens:a.inputTokens||0,outputTokens:a.outputTokens||0,totalTokens:a.totalTokens||0,estimatedCost:a.estimatedCost||0,model:a.aiGradingModel})]})})]}),e.jsxs(x,{className:"border-green-200",children:[e.jsxs(p,{children:[e.jsx(f,{className:"text-green-700",children:"Result B Response"}),e.jsxs(L,{children:["Model: ",r.aiGradingModel||"Unknown"," • Grade: ",r.aiGrade||"N/A","/10"]})]}),e.jsx(h,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Agent Response:"}),e.jsx("div",{className:"bg-green-50 p-3 rounded text-sm max-h-32 overflow-y-auto",children:r.agentResponse||"No response available"})]}),(r.inputTokens||r.outputTokens)&&e.jsx(de,{inputTokens:r.inputTokens||0,outputTokens:r.outputTokens||0,totalTokens:r.totalTokens||0,estimatedCost:r.estimatedCost||0,model:r.aiGradingModel})]})})]})]})]})}function Ge({agentType:u}){const[a,r]=N.useState(""),[b,v]=N.useState(""),[y,j]=N.useState(!1),{data:T=[],isLoading:m}=Y({queryKey:["/api/baseline-testing/runs",u],queryFn:async()=>{const n=await fetch(`/api/baseline-testing/runs?agentType=${u}`);if(!n.ok)throw new Error("Failed to fetch test runs");return n.json()}}),t=T.filter(n=>n.status==="completed"),i=()=>{a&&b&&a!==b&&j(!0)},g=n=>{const w=new Date(n.createdAt).toLocaleDateString(),c=n.state?` (${n.state})`:"",s=n.avgAccuracy?` - ${n.avgAccuracy.toFixed(1)}%`:"";return`${n.model}${c}${s} - ${w}`};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(x,{children:[e.jsxs(p,{children:[e.jsxs(f,{className:"flex items-center",children:[e.jsx(X,{className:"w-5 h-5 mr-2"}),"Compare Baseline Results"]}),e.jsx(L,{children:"Compare performance metrics between different baseline test runs"})]}),e.jsx(h,{className:"space-y-6",children:m?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(ae,{className:"w-6 h-6 animate-spin mr-2"}),"Loading test results..."]}):t.length<2?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(X,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Need More Test Results"}),e.jsxs("p",{className:"text-gray-500 dark:text-gray-400",children:["At least 2 completed baseline test runs are required for comparison.",t.length===1?" You have 1 completed run.":" You have no completed runs."]}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:'Run more baseline tests in the "Baseline" tab to enable comparisons.'})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"First Result"}),e.jsxs(P,{value:a,onValueChange:r,children:[e.jsx($,{children:e.jsx(E,{placeholder:"Select first result to compare"})}),e.jsx(q,{children:t.map(n=>e.jsx(d,{value:n.id.toString(),children:g(n)},n.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Second Result"}),e.jsxs(P,{value:b,onValueChange:v,children:[e.jsx($,{children:e.jsx(E,{placeholder:"Select second result to compare"})}),e.jsx(q,{children:t.map(n=>e.jsx(d,{value:n.id.toString(),disabled:n.id.toString()===a,children:g(n)},n.id))})]})]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsxs(S,{onClick:i,disabled:!a||!b||a===b,className:"w-full md:w-auto",children:[e.jsx(X,{className:"w-4 h-4 mr-2"}),"Compare Results"]})})]})})]}),y&&a&&b&&e.jsx(Qe,{result1Id:parseInt(a),result2Id:parseInt(b)}),t.length>0&&e.jsxs(x,{children:[e.jsxs(p,{children:[e.jsxs(f,{className:"flex items-center",children:[e.jsx(ue,{className:"w-5 h-5 mr-2"}),"Recent Completed Results"]}),e.jsx(L,{children:"Quick overview of recent completed baseline test runs"})]}),e.jsx(h,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.slice(0,6).map(n=>e.jsx(x,{className:"p-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium text-sm",children:n.model}),n.state&&e.jsx(C,{variant:"outline",className:"text-xs",children:n.state})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Accuracy:"}),e.jsx("span",{className:`ml-1 font-medium ${n.avgAccuracy&&n.avgAccuracy>=80?"text-green-600":n.avgAccuracy&&n.avgAccuracy>=60?"text-yellow-600":"text-red-600"}`,children:n.avgAccuracy?`${n.avgAccuracy.toFixed(1)}%`:"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Questions:"}),e.jsxs("span",{className:"ml-1 font-medium",children:[n.successfulTests,"/",n.totalQuestions]})]})]}),e.jsx("div",{className:"text-xs text-gray-400",children:new Date(n.createdAt).toLocaleDateString()}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(S,{variant:"outline",size:"sm",onClick:()=>r(n.id.toString()),className:"flex-1 text-xs",children:"Select as First"}),e.jsx(S,{variant:"outline",size:"sm",onClick:()=>v(n.id.toString()),className:"flex-1 text-xs",disabled:a===n.id.toString(),children:"Select as Second"})]})]})},n.id))})})]})]})}function Ue(){var F,M,V,B,R,z,K,l,A,Q,U;const[u,a]=N.useState("overview"),[r,b]=N.useState(null),[v,y]=N.useState([]);N.useState("");const[j,T]=N.useState(null),[m,t]=N.useState({}),i=xe(),{toast:g}=oe(),{data:n,isLoading:w}=Y({queryKey:["/api/agents/compliance/dashboard"],refetchInterval:3e4});Y({queryKey:["/api/agents/compliance/config"],onSuccess:o=>{T(o)}}),Z({mutationFn:async o=>ne("/api/agents/compliance/chat",{method:"POST",body:{message:o,conversation_id:"compliance-dashboard"}}),onSuccess:o=>{const k={id:Date.now().toString()+"_assistant",role:"assistant",content:o.response,timestamp:new Date().toISOString()};y(W=>[...W,k])}}),Z({mutationFn:async o=>ne("/api/agents/compliance/config",{method:"PUT",body:o}),onSuccess:()=>{g({title:"Configuration Updated",description:"Prompt configuration has been saved successfully."}),t({}),i.invalidateQueries({queryKey:["/api/agents/compliance/config"]})},onError:o=>{g({title:"Update Failed",description:"Failed to update configuration. Please try again.",variant:"destructive"})}});const c=o=>{b(o),a("results")};if(w)return e.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[e.jsx(he,{className:"w-8 h-8 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Loading compliance dashboard..."})]});const s=n;return!s||s.error?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx(se,{className:"w-12 h-12 mx-auto mb-4 text-yellow-500"}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Real Cannabis Regulatory Data Collection"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:["Collecting live data from state cannabis regulatory websites including:",e.jsx("br",{}),"California DCC, Colorado MED, Washington LCB, Oregon OLCC, and 21+ other states"]}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-800",children:e.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:["🌐 ",e.jsx("strong",{children:"Real Data Sources:"})," cannabis.ca.gov, colorado.gov, lcb.wa.gov, oregon.gov/olcc",e.jsx("br",{}),"📊 ",e.jsx("strong",{children:"No Mock Data:"})," All metrics collected from actual regulatory websites",e.jsx("br",{}),"🔄 ",e.jsx("strong",{children:"Live Collection:"})," Processing regulatory citations and compliance documents"]})})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-8",children:[e.jsx("div",{className:"bg-green-100 dark:bg-green-900 p-3 rounded-full",children:e.jsx(re,{className:"w-8 h-8 text-green-600 dark:text-green-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Compliance Agent Dashboard"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Real-time cannabis regulatory data from 25 state websites"})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 px-4 py-2 rounded-lg border border-blue-200 dark:border-blue-800",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:"Live Data Collection"})]}),e.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-300 mt-1",children:(s==null?void 0:s.data_source)==="real_state_websites"?"Real regulatory sources":"Processing..."})]})]}),e.jsxs(Ce,{value:u,onValueChange:a,className:"space-y-6",children:[e.jsxs(Te,{className:"grid w-full grid-cols-6",children:[e.jsx(D,{value:"overview",children:"Overview"}),e.jsx(D,{value:"baseline",children:"Baseline"}),e.jsx(D,{value:"results",children:"Results"}),e.jsx(D,{value:"comparison",children:"Compare"}),e.jsx(D,{value:"chat",children:"Chat"}),e.jsx(D,{value:"prompts",children:"Prompts"})]}),e.jsxs(O,{value:"overview",className:"space-y-6",children:[e.jsxs(x,{className:"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800",children:[e.jsx(p,{children:e.jsxs(f,{className:"text-green-800 dark:text-green-300 flex items-center",children:[e.jsx(ee,{className:"w-5 h-5 mr-2"}),"Authentic Cannabis Compliance Test Results"]})}),e.jsx(h,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-green-700 dark:text-green-300",children:[e.jsx("strong",{children:"Data Source:"})," ",(s==null?void 0:s.data_source)||"baseline_results.json"]}),e.jsxs("p",{className:"text-green-700 dark:text-green-300",children:[e.jsx("strong",{children:"Description:"})," ",((F=s==null?void 0:s.baseline_info)==null?void 0:F.description)||"Cannabis compliance with authentic test results"]}),e.jsxs("p",{className:"text-green-700 dark:text-green-300",children:[e.jsx("strong",{children:"Version:"})," ",((M=s==null?void 0:s.baseline_info)==null?void 0:M.version)||"1.0"]}),e.jsxs("p",{className:"text-green-700 dark:text-green-300",children:[e.jsx("strong",{children:"Last Updated:"})," ",(V=s==null?void 0:s.baseline_info)!=null&&V.last_updated?new Date(s.baseline_info.last_updated).toLocaleDateString():"Unknown"]})]})})]}),(s==null?void 0:s.test_results)&&e.jsxs(x,{children:[e.jsxs(p,{children:[e.jsx(f,{children:"Authentic Test Performance"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Real test results from baseline_results.json"})]}),e.jsxs(h,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[s.test_results.accuracy,"%"]}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Accuracy"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[s.test_results.confidence,"%"]}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Confidence"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[s.test_results.pass_rate,"%"]}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Pass Rate"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:[s.test_results.response_time,"ms"]}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Response Time"})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t",children:e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{children:["Tests Passed: ",e.jsx("strong",{className:"text-green-600",children:s.test_results.passed_tests})]}),e.jsxs("span",{children:["Tests Failed: ",e.jsx("strong",{className:"text-red-600",children:s.test_results.failed_tests})]}),e.jsxs("span",{children:["Total Tests: ",e.jsx("strong",{children:s.test_results.total_tests})]})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs(x,{children:[e.jsx(p,{className:"pb-3",children:e.jsx(f,{className:"text-sm font-medium",children:"Total Questions"})}),e.jsxs(h,{children:[e.jsx("div",{className:"text-2xl font-bold",children:((B=s==null?void 0:s.question_metrics)==null?void 0:B.total_questions)||"0"}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Baseline test questions"})]})]}),e.jsxs(x,{children:[e.jsx(p,{className:"pb-3",children:e.jsx(f,{className:"text-sm font-medium",children:"Categories"})}),e.jsxs(h,{children:[e.jsx("div",{className:"text-2xl font-bold",children:((z=(R=s==null?void 0:s.question_metrics)==null?void 0:R.categories)==null?void 0:z.length)||"0"}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Compliance areas"})]})]}),e.jsxs(x,{children:[e.jsx(p,{className:"pb-3",children:e.jsx(f,{className:"text-sm font-medium",children:"Difficulty Levels"})}),e.jsxs(h,{children:[e.jsx("div",{className:"text-2xl font-bold",children:((l=(K=s==null?void 0:s.question_metrics)==null?void 0:K.difficulties)==null?void 0:l.length)||"0"}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Question complexity"})]})]})]}),e.jsxs(x,{children:[e.jsxs(p,{children:[e.jsx(f,{children:"Baseline Testing & Model Comparison"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"View and manage baseline questions with comprehensive model comparison data"})]}),e.jsxs(h,{children:[e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx(je,{href:"/agent/compliance/baseline",children:e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(Se,{className:"w-4 h-4"}),"View Baseline Table"]})}),e.jsxs(S,{variant:"outline",onClick:()=>a("baseline"),className:"flex items-center gap-2",children:[e.jsx(re,{className:"w-4 h-4"}),"Run New Test"]}),e.jsxs(S,{variant:"outline",onClick:()=>a("results"),className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"w-4 h-4"}),"View Results"]})]}),e.jsx("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:e.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:["💡 ",e.jsx("strong",{children:"Baseline Table:"})," Dynamic table showing questions with model responses, grades, confidence scores, and cost analysis across all available AI models"]})})]})]}),(s==null?void 0:s.baseline_questions)&&e.jsxs(x,{children:[e.jsxs(p,{children:[e.jsx(f,{children:"Category Performance Results"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Authentic test results by compliance category"})]}),e.jsx(h,{children:e.jsx("div",{className:"space-y-4",children:Object.entries(s.baseline_questions).map(([o,k])=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("h4",{className:"font-medium capitalize",children:o.replace("_"," ")}),e.jsxs(C,{variant:k.accuracy>=70?"default":k.accuracy>=50?"secondary":"destructive",children:[k.accuracy,"% accuracy"]})]}),e.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("span",{children:["Passed: ",k.passed,"/",k.total]}),e.jsxs("span",{children:["Failed: ",k.total-k.passed]})]}),e.jsx("div",{className:"mt-2",children:e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${k.accuracy>=70?"bg-green-500":k.accuracy>=50?"bg-yellow-500":"bg-red-500"}`,style:{width:`${k.accuracy}%`}})})})]},o))})})]}),e.jsxs(x,{children:[e.jsxs(p,{children:[e.jsx(f,{children:"Question Categories"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Click on a category to view baseline test results"})]}),e.jsx(h,{children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:((A=s==null?void 0:s.question_metrics)==null?void 0:A.category_breakdown)&&Object.entries(s.question_metrics.category_breakdown).map(([o,k])=>e.jsxs("div",{onClick:()=>a("results"),className:"text-center p-4 border rounded-lg hover:shadow-md transition-shadow cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800",children:[e.jsx("div",{className:"text-lg font-semibold",children:k}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 capitalize",children:o.replace(/[-_]/g," ")})]},o))})})]}),e.jsxs(x,{children:[e.jsxs(p,{children:[e.jsx(f,{children:"Question Difficulty"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Click on a difficulty level to view baseline test results"})]}),e.jsx(h,{children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:((Q=s==null?void 0:s.question_metrics)==null?void 0:Q.difficulty_breakdown)&&Object.entries(s.question_metrics.difficulty_breakdown).map(([o,k])=>e.jsxs("div",{onClick:()=>a("results"),className:"text-center p-4 border rounded-lg hover:shadow-md transition-shadow cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800",children:[e.jsx("div",{className:"text-lg font-semibold",children:k}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 capitalize",children:o})]},o))})})]}),e.jsxs(x,{children:[e.jsxs(p,{children:[e.jsx(f,{children:"Sample Authentic Questions & Answers"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Real cannabis compliance questions and expert answers from baseline.json"})]}),e.jsx(h,{children:e.jsx("div",{className:"space-y-6",children:(U=s==null?void 0:s.real_questions)==null?void 0:U.slice(0,3).map((o,k)=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(C,{variant:"outline",className:"text-xs",children:o.category}),e.jsx(C,{variant:o.difficulty==="advanced"?"destructive":o.difficulty==="intermediate"?"default":"secondary",children:o.difficulty})]}),e.jsxs("span",{className:"text-xs text-gray-500",children:["ID: ",o.id]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{children:e.jsxs("h4",{className:"font-medium text-blue-800 dark:text-blue-300 mb-2",children:["Q: ",o.question]})}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-3",children:[e.jsx("p",{className:"text-sm font-medium text-green-800 dark:text-green-300 mb-2",children:"Expert Answer:"}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 leading-relaxed",children:o.expectedAnswer})]}),o.tags&&o.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:o.tags.map((W,ge)=>e.jsx(C,{variant:"secondary",className:"text-xs",children:W},ge))})]})]},o.id))})})]})]}),e.jsx(O,{value:"baseline",className:"space-y-6",children:e.jsx(Ee,{agentType:"compliance",onTestStarted:c})}),e.jsx(O,{value:"results",className:"space-y-6",children:e.jsx(qe,{agentType:"compliance",activeTestRun:r})}),e.jsx(O,{value:"comparison",className:"space-y-6",children:e.jsx(Ge,{agentType:"compliance"})}),e.jsx(O,{value:"chat",className:"space-y-6",children:e.jsxs(x,{children:[e.jsxs(p,{children:[e.jsx(f,{children:"Compliance Expert Chat"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Ask questions about cannabis compliance and regulations"})]}),e.jsx(h,{children:e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg",children:e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Chat functionality will be implemented with authentic compliance data from baseline.json"})})})})]})}),e.jsx(O,{value:"prompts",className:"space-y-6",children:e.jsxs(x,{children:[e.jsxs(p,{children:[e.jsx(f,{children:"Prompt Configuration"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Configure how the compliance agent responds to queries"})]}),e.jsx(h,{children:e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg",children:e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Prompt engineering settings will use authentic baseline data structures"})})})})]})})]})]})})}export{Ue as default};
