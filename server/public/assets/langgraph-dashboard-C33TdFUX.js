import{a4 as W,r as A,j as e,z as B,f as m,q as F,p as L,n as R,e as K,m as N,B as O,R as U,T as D,i as Q,k as v,l as w,C as n,d as r,M,a as g,b as p,K as E,Z as H,P as I}from"./index-CDF1r-gK.js";import{S as V}from"./sidebar-CLhOKkd8.js";import{G as P}from"./git-branch-BC1FKsKt.js";import{T as _}from"./trending-up-nueEWtNi.js";import{U as X}from"./users-C5p7ZLl8.js";import{A as z}from"./activity-BjdGuAuP.js";import{N as Z}from"./network-CjBewfT2.js";import{C as Y}from"./circle-x-f4oyK_p7.js";import"./database-CRQSCV_c.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=W("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);function ee({className:o=""}){const[u,b]=A.useState(null),k=[{id:"compliance",name:"üõ°Ô∏è Compliance",type:"Regulatory",status:"active",performance:85,confidence:92},{id:"patent",name:"‚öñÔ∏è Patent/Trademark",type:"Legal",status:"active",performance:78,confidence:88},{id:"operations",name:"‚öôÔ∏è Operations",type:"Business",status:"active",performance:90,confidence:95},{id:"formulation",name:"üß™ Formulation",type:"Science",status:"active",performance:82,confidence:87},{id:"sourcing",name:"üõí Sourcing",type:"Supply Chain",status:"active",performance:76,confidence:82},{id:"marketing",name:"üì¢ Marketing",type:"Business",status:"active",performance:88,confidence:90},{id:"science",name:"üî¨ Science",type:"Research",status:"active",performance:93,confidence:96},{id:"spectra",name:"üìä Spectra",type:"Analytics",status:"development",performance:70,confidence:75},{id:"customer",name:"ü§ù Customer Success",type:"Support",status:"active",performance:84,confidence:89}],C=[{source:"compliance",target:"operations",type:"verification",frequency:15},{source:"compliance",target:"marketing",type:"verification",frequency:12},{source:"formulation",target:"science",type:"collaboration",frequency:20},{source:"formulation",target:"spectra",type:"data_flow",frequency:18},{source:"operations",target:"sourcing",type:"collaboration",frequency:14},{source:"marketing",target:"customer",type:"data_flow",frequency:16},{source:"patent",target:"formulation",type:"verification",frequency:8},{source:"science",target:"compliance",type:"escalation",frequency:6}],s=window.innerWidth<768,i=s?180:300,S=s?150:200,h=s?80:120,x=s?18:25,d=k.map((t,a)=>{const l=a/k.length*2*Math.PI-Math.PI/2;return{...t,x:i+h*Math.cos(l),y:S+h*Math.sin(l)}}),y=(t,a)=>t==="development"?"#f59e0b":a>=90?"#10b981":a>=80?"#3b82f6":"#ef4444",f=t=>{switch(t){case"active":return e.jsx(R,{className:"h-3 w-3"});case"development":return e.jsx(L,{className:"h-3 w-3"});case"inactive":return e.jsx(F,{className:"h-3 w-3"});default:return e.jsx(B,{className:"h-3 w-3"})}},T=t=>{switch(t){case"verification":return"#3b82f6";case"collaboration":return"#10b981";case"data_flow":return"#8b5cf6";case"escalation":return"#ef4444";default:return"#6b7280"}},c=u?d.find(t=>t.id===u):null;return e.jsxs("div",{className:`relative w-full h-full bg-white rounded-lg border ${o}`,children:[e.jsxs("svg",{viewBox:s?"0 0 360 300":"0 0 600 400",className:"w-full h-full",style:{minHeight:s?"300px":"400px"},children:[e.jsx("defs",{children:e.jsx("pattern",{id:"grid",width:"20",height:"20",patternUnits:"userSpaceOnUse",children:e.jsx("path",{d:"M 20 0 L 0 0 0 20",fill:"none",stroke:"#f3f4f6",strokeWidth:"1"})})}),e.jsx("rect",{width:"100%",height:"100%",fill:"url(#grid)"}),C.map((t,a)=>{const l=d.find(q=>q.id===t.source),j=d.find(q=>q.id===t.target);if(!l||!j)return null;const $=Math.max(1,t.frequency/3),G=T(t.type);return e.jsxs("g",{children:[e.jsx("line",{x1:l.x,y1:l.y,x2:j.x,y2:j.y,stroke:G,strokeWidth:$,strokeDasharray:t.type==="escalation"?"5,5":"none",opacity:.6}),!s&&e.jsx("text",{x:(l.x+j.x)/2,y:(l.y+j.y)/2-5,fontSize:"10",fill:"#6b7280",textAnchor:"middle",className:"pointer-events-none",children:t.frequency})]},a)}),d.map(t=>{const a=y(t.status,t.confidence),l=u===t.id;return e.jsxs("g",{children:[e.jsx("circle",{cx:t.x+2,cy:t.y+2,r:x,fill:"rgba(0,0,0,0.1)"}),e.jsx("circle",{cx:t.x,cy:t.y,r:x,fill:a,stroke:l?"#007BFF":"#fff",strokeWidth:l?4:2,className:"cursor-pointer transition-all duration-200 hover:scale-110",onClick:()=>b(t.id)}),e.jsx("circle",{cx:t.x,cy:t.y,r:x*.7,fill:"white",opacity:.9}),e.jsx("circle",{cx:t.x,cy:t.y,r:x*.5,fill:a,opacity:t.confidence/100}),e.jsx("foreignObject",{x:t.x-8,y:t.y-8,width:"16",height:"16",className:"pointer-events-none",children:e.jsx("div",{className:"flex items-center justify-center w-full h-full text-white",children:e.jsx(B,{className:"h-4 w-4"})})}),e.jsx("text",{x:t.x,y:t.y+x+(s?12:15),fontSize:s?"10":"12",fontWeight:"600",fill:"#374151",textAnchor:"middle",className:"pointer-events-none",children:s?t.name.split(" ")[0]:t.name}),!s&&e.jsxs("text",{x:t.x,y:t.y+x+28,fontSize:"10",fill:"#6b7280",textAnchor:"middle",className:"pointer-events-none",children:[t.confidence,"%"]})]},t.id)})]}),!s&&e.jsxs("div",{className:"absolute top-4 left-4 bg-white/95 backdrop-blur-sm rounded-lg p-3 border shadow-sm",children:[e.jsx("h4",{className:"text-sm font-semibold mb-2",children:"Network Legend"}),e.jsxs("div",{className:"space-y-1 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),e.jsx("span",{children:"Verification"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),e.jsx("span",{children:"Collaboration"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-purple-500"}),e.jsx("span",{children:"Data Flow"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-1 bg-red-500",style:{borderStyle:"dashed"}}),e.jsx("span",{children:"Escalation"})]})]})]}),c&&e.jsxs("div",{className:`absolute ${s?"bottom-4 left-4 right-4":"top-4 right-4"} bg-white/95 backdrop-blur-sm rounded-lg p-3 border shadow-sm ${s?"max-w-none":"max-w-xs"}`,children:[e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsxs("div",{className:"flex items-center gap-1",children:[f(c.status),e.jsx("span",{className:`${s?"text-xs":"text-sm"} font-semibold`,children:c.name})]})}),e.jsxs("div",{className:`${s?"grid grid-cols-2 gap-2":"space-y-1"} text-xs`,children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Type:"}),e.jsx(m,{variant:"outline",className:"text-xs",children:c.type})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Status:"}),e.jsx(m,{variant:c.status==="active"?"default":"secondary",className:"text-xs",children:c.status})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Performance:"}),e.jsxs("span",{className:"font-medium",children:[c.performance,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Confidence:"}),e.jsxs("span",{className:"font-medium",children:[c.confidence,"%"]})]})]})]})]})}function de(){const{isAuthenticated:o}=K(),[u,b]=A.useState("overview"),[k,C]=A.useState(null),{data:s,isLoading:i,refetch:S}=N({queryKey:["/api/langgraph/metrics"],enabled:o,refetchInterval:3e4}),{data:h,isLoading:x}=N({queryKey:["/api/langgraph/threads"],enabled:o,refetchInterval:1e4}),{data:d}=N({queryKey:["/api/langgraph/visualization"],enabled:o}),y=d==null?void 0:d.visualization,{data:f,isLoading:T}=N({queryKey:["/api/langgraph/recent-workflows"],enabled:o,refetchInterval:15e3}),c=a=>{switch(a){case"completed":case"active":return"bg-green-100 text-green-800";case"processing":return"bg-blue-100 text-blue-800";case"failed":return"bg-red-100 text-red-800";case"pending":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},t=a=>{switch(a){case"completed":return e.jsx(R,{className:"h-4 w-4 text-green-500"});case"processing":return e.jsx(L,{className:"h-4 w-4 text-blue-500 animate-spin"});case"failed":return e.jsx(Y,{className:"h-4 w-4 text-red-500"});case"pending":return e.jsx(L,{className:"h-4 w-4 text-yellow-500"});default:return e.jsx(z,{className:"h-4 w-4 text-gray-500"})}};return o?e.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col lg:flex-row",children:[e.jsx(V,{}),e.jsxs("div",{className:"flex-1 p-4 lg:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-xl lg:text-2xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(P,{className:"h-5 w-5 lg:h-6 lg:w-6 text-formul8-green"}),e.jsx("span",{className:"hidden sm:inline",children:"LangGraph Orchestration Dashboard"}),e.jsx("span",{className:"sm:hidden",children:"LangGraph Dashboard"})]}),e.jsx("p",{className:"text-sm lg:text-base text-gray-600",children:"Monitor multi-agent workflows and consensus building"})]}),e.jsxs(O,{onClick:()=>S(),disabled:i,variant:"outline",size:"sm",className:"self-start sm:self-auto",children:[e.jsx(U,{className:`h-4 w-4 mr-2 ${i?"animate-spin":""}`}),"Refresh"]})]}),e.jsxs(D,{value:u,onValueChange:b,className:"space-y-4 lg:space-y-6",children:[e.jsxs(Q,{className:"grid w-full grid-cols-2 sm:grid-cols-4 h-auto",children:[e.jsx(v,{value:"overview",className:"text-xs sm:text-sm px-2 py-2",children:"Overview"}),e.jsx(v,{value:"workflows",className:"text-xs sm:text-sm px-2 py-2",children:"Workflows"}),e.jsx(v,{value:"threads",className:"text-xs sm:text-sm px-2 py-2",children:"Conversations"}),e.jsx(v,{value:"visualization",className:"text-xs sm:text-sm px-2 py-2",children:"Visualization"})]}),e.jsxs(w,{value:"overview",className:"space-y-4 lg:space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 lg:gap-6",children:[e.jsx(n,{children:e.jsx(r,{className:"p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-600",children:"Total Queries"}),e.jsx("p",{className:"text-xl lg:text-2xl font-bold text-gray-900",children:i?"...":(s==null?void 0:s.totalQueries)||0})]}),e.jsx(M,{className:"h-6 w-6 lg:h-8 lg:w-8 text-blue-500"})]})})}),e.jsx(n,{children:e.jsx(r,{className:"p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-600",children:"Success Rate"}),e.jsx("p",{className:"text-xl lg:text-2xl font-bold text-green-600",children:i?"...":`${(s==null?void 0:s.successRate)||0}%`})]}),e.jsx(_,{className:"h-6 w-6 lg:h-8 lg:w-8 text-green-500"})]})})}),e.jsx(n,{children:e.jsx(r,{className:"p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-600",children:"Avg Processing Time"}),e.jsx("p",{className:"text-xl lg:text-2xl font-bold text-orange-600",children:i?"...":`${(s==null?void 0:s.avgProcessingTime)||0}s`})]}),e.jsx(J,{className:"h-6 w-6 lg:h-8 lg:w-8 text-orange-500"})]})})}),e.jsx(n,{children:e.jsx(r,{className:"p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-600",children:"Consensus Rate"}),e.jsx("p",{className:"text-xl lg:text-2xl font-bold text-purple-600",children:i?"...":`${(s==null?void 0:s.consensusRate)||0}%`})]}),e.jsx(X,{className:"h-6 w-6 lg:h-8 lg:w-8 text-purple-500"})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 lg:gap-6",children:[e.jsxs(n,{children:[e.jsx(g,{children:e.jsxs(p,{className:"flex items-center gap-2",children:[e.jsx(E,{className:"h-5 w-5"}),"Query Breakdown"]})}),e.jsx(r,{className:"space-y-3 lg:space-y-4",children:(s==null?void 0:s.queryBreakdown)&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs sm:text-sm font-medium",children:"Completed"}),e.jsx(m,{className:"bg-green-100 text-green-800 text-xs",children:s.queryBreakdown.completed})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs sm:text-sm font-medium",children:"Processing"}),e.jsx(m,{className:"bg-blue-100 text-blue-800 text-xs",children:s.queryBreakdown.processing})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs sm:text-sm font-medium",children:"Failed"}),e.jsx(m,{className:"bg-red-100 text-red-800 text-xs",children:s.queryBreakdown.failed})]})]})})]}),e.jsxs(n,{children:[e.jsx(g,{children:e.jsxs(p,{className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-5 w-5"}),"Performance Metrics"]})}),e.jsxs(r,{className:"space-y-3 lg:space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-xs sm:text-sm mb-1",children:[e.jsx("span",{children:"Average Confidence"}),e.jsxs("span",{children:[(s==null?void 0:s.avgConfidence)||0,"%"]})]}),e.jsx(I,{value:(s==null?void 0:s.avgConfidence)||0,className:"h-2"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-xs sm:text-sm mb-1",children:[e.jsx("span",{children:"Human Review Rate"}),e.jsxs("span",{children:[(s==null?void 0:s.humanReviewRate)||0,"%"]})]}),e.jsx(I,{value:(s==null?void 0:s.humanReviewRate)||0,className:"h-2"})]})]})]})]})]}),e.jsx(w,{value:"workflows",className:"space-y-4 lg:space-y-6",children:e.jsxs(n,{children:[e.jsx(g,{className:"pb-3 lg:pb-6",children:e.jsxs(p,{className:"flex items-center gap-2 text-lg lg:text-xl",children:[e.jsx(z,{className:"h-4 w-4 lg:h-5 lg:w-5"}),"Recent Workflow Steps"]})}),e.jsx(r,{children:T?e.jsx("div",{className:"text-center py-6 lg:py-8 text-sm lg:text-base",children:"Loading workflow data..."}):f&&f.length>0?e.jsx("div",{className:"space-y-2 lg:space-y-3",children:f.map((a,l)=>e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between p-3 border rounded-lg gap-3 sm:gap-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[t(a.status),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"font-medium text-sm lg:text-base truncate",children:a.step}),e.jsxs("p",{className:"text-xs lg:text-sm text-gray-600",children:["Agent: ",a.agent]})]})]}),e.jsxs("div",{className:"flex items-center justify-between sm:flex-col sm:items-end sm:text-right gap-2 sm:gap-1",children:[e.jsx(m,{className:`${c(a.status)} text-xs`,children:a.status}),e.jsxs("p",{className:"text-xs text-gray-500",children:[a.duration,"ms"]})]})]},l))}):e.jsx("div",{className:"text-center py-6 lg:py-8 text-gray-500 text-sm lg:text-base",children:"No recent workflow activity"})})]})}),e.jsx(w,{value:"threads",className:"space-y-4 lg:space-y-6",children:e.jsxs(n,{children:[e.jsx(g,{className:"pb-3 lg:pb-6",children:e.jsxs(p,{className:"flex items-center gap-2 text-lg lg:text-xl",children:[e.jsx(M,{className:"h-4 w-4 lg:h-5 lg:w-5"}),"Active Conversation Threads"]})}),e.jsx(r,{children:x?e.jsx("div",{className:"text-center py-6 lg:py-8 text-sm lg:text-base",children:"Loading conversation threads..."}):h&&h.length>0?e.jsx("div",{className:"space-y-2 lg:space-y-3",children:h.map(a=>e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between p-3 lg:p-4 border rounded-lg hover:bg-gray-50 cursor-pointer gap-3 sm:gap-0",onClick:()=>C(a.threadId),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[t(a.status),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("p",{className:"font-medium text-sm lg:text-base",children:["Thread ",a.threadId.slice(-8)]}),e.jsxs("p",{className:"text-xs lg:text-sm text-gray-600",children:[a.messageCount," messages ‚Ä¢ ",a.agentsInvolved.length," agents"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between sm:flex-col sm:items-end sm:text-right gap-2 sm:gap-1",children:[e.jsx(m,{className:`${c(a.status)} text-xs`,children:a.status}),a.consensusReached&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(R,{className:"h-3 w-3 text-green-500"}),e.jsx("span",{className:"text-xs text-green-600",children:"Consensus"})]})]})]},a.threadId))}):e.jsx("div",{className:"text-center py-6 lg:py-8 text-gray-500 text-sm lg:text-base",children:"No active conversation threads"})})]})}),e.jsx(w,{value:"visualization",className:"space-y-4 lg:space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-4 lg:gap-6",children:[e.jsxs(n,{className:"xl:col-span-2",children:[e.jsx(g,{className:"pb-3 lg:pb-6",children:e.jsxs(p,{className:"flex items-center gap-2 text-lg lg:text-xl",children:[e.jsx(Z,{className:"h-4 w-4 lg:h-5 lg:w-5"}),"Agent Network Graph"]})}),e.jsx(r,{children:e.jsx("div",{className:"h-96 lg:h-[500px]",children:e.jsx(ee,{})})})]}),e.jsxs(n,{className:"xl:col-span-2",children:[e.jsx(g,{className:"pb-3 lg:pb-6",children:e.jsxs(p,{className:"flex items-center gap-2 text-lg lg:text-xl",children:[e.jsx(P,{className:"h-4 w-4 lg:h-5 lg:w-5"}),"LangGraph Workflow"]})}),e.jsx(r,{children:y?e.jsxs("div",{className:"border rounded-lg p-3 lg:p-4 bg-white overflow-x-auto",children:[e.jsx("pre",{className:"text-xs lg:text-sm whitespace-pre-wrap font-mono",children:y}),e.jsx("div",{className:"mt-3 lg:mt-4 text-xs text-gray-500",children:"This Mermaid diagram shows the complete LangGraph workflow from query to final response."})]}):e.jsx("div",{className:"text-center py-6 lg:py-8 text-gray-500 text-sm lg:text-base",children:"Workflow visualization not available"})})]})]})})]})]})]}):e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-10 h-10 bg-formul8-green rounded-lg flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"text-white font-bold text-lg",children:"F8"})}),e.jsx("p",{className:"text-formul8-gray",children:"Please log in to access the LangGraph dashboard"})]})})}export{de as default};
