import{e as D,m as f,j as e,C as r,d as c,U as S,a as l,A as Y,N as k,x as P,b as n,c as d,f as t,O as x,B as U,S as I,T as M,i as R,k as m,l as o,M as p,Q as h,z as $,V as v,o as g}from"./index-CDF1r-gK.js";import{S as B}from"./separator-CYAIRvWi.js";import{A as y}from"./activity-BjdGuAuP.js";function z(){var b,w,A;const{user:u}=D(),{data:a,isLoading:C}=f({queryKey:["/api/user/profile"],enabled:!!u}),{data:j}=f({queryKey:["/api/user/activity"],enabled:!!u}),{data:N}=f({queryKey:["/api/conversations"],enabled:!!u});if(C)return e.jsx("div",{className:"container mx-auto px-4 py-8 max-w-6xl",children:e.jsxs("div",{className:"animate-pulse space-y-6",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3"}),e.jsx("div",{className:"h-64 bg-gray-200 rounded"}),e.jsx("div",{className:"h-96 bg-gray-200 rounded"})]})});if(!a)return e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx(r,{children:e.jsxs(c,{className:"text-center py-12",children:[e.jsx(S,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Profile Not Found"}),e.jsx("p",{className:"text-muted-foreground",children:"Unable to load user profile."})]})})});const T=(s,i)=>`${(s==null?void 0:s[0])||""}${(i==null?void 0:i[0])||""}`.toUpperCase()||"U",Q=s=>{switch(s){case"conversation_created":return e.jsx(p,{className:"h-4 w-4"});case"query":return e.jsx(g,{className:"h-4 w-4"});case"login":return e.jsx(S,{className:"h-4 w-4"});case"project_created":return e.jsx(v,{className:"h-4 w-4"});default:return e.jsx(y,{className:"h-4 w-4"})}};return e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-6xl",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-formul8-text-primary mb-2",children:"User Profile"}),e.jsx("p",{className:"text-formul8-text-secondary",children:"Manage your account, view conversation history, and track your activity"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(r,{children:[e.jsx(l,{children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(Y,{className:"h-16 w-16",children:[e.jsx(k,{src:a.profileImageUrl}),e.jsx(P,{className:"text-lg",children:T(a.firstName,a.lastName)})]}),e.jsxs("div",{children:[e.jsx(n,{className:"text-xl",children:a.firstName&&a.lastName?`${a.firstName} ${a.lastName}`:a.email}),e.jsx(d,{children:a.email}),a.company&&e.jsx(t,{variant:"outline",className:"mt-1",children:a.company})]})]})}),e.jsxs(c,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-muted-foreground",children:"Role"}),e.jsx("div",{className:"font-medium capitalize",children:a.role})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted-foreground",children:"Total Queries"}),e.jsx("div",{className:"font-medium",children:a.totalQueries||0})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted-foreground",children:"Member Since"}),e.jsx("div",{className:"font-medium",children:new Date(a.createdAt).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted-foreground",children:"Last Active"}),e.jsx("div",{className:"font-medium",children:a.lastActiveAt?x(new Date(a.lastActiveAt),{addSuffix:!0}):"Never"})]})]}),e.jsx(B,{}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Quick Stats"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Projects"}),e.jsx("span",{children:((b=a.projects)==null?void 0:b.length)||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Conversations"}),e.jsx("span",{children:((w=a.recentConversations)==null?void 0:w.length)||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Recent Queries"}),e.jsx("span",{children:((A=a.recentQueries)==null?void 0:A.length)||0})]})]})]}),e.jsxs(U,{className:"w-full",variant:"outline",children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"Account Settings"]})]})]})}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(M,{defaultValue:"conversations",className:"space-y-4",children:[e.jsxs(R,{className:"grid w-full grid-cols-4",children:[e.jsx(m,{value:"conversations",children:"Conversations"}),e.jsx(m,{value:"activity",children:"Activity"}),e.jsx(m,{value:"projects",children:"Projects"}),e.jsx(m,{value:"queries",children:"Queries"})]}),e.jsx(o,{value:"conversations",children:e.jsxs(r,{children:[e.jsxs(l,{children:[e.jsxs(n,{className:"flex items-center gap-2",children:[e.jsx(p,{className:"h-5 w-5"}),"Recent Conversations"]}),e.jsx(d,{children:"Your recent chat sessions with AI agents"})]}),e.jsx(c,{children:e.jsx(h,{className:"h-96",children:N&&N.length>0?e.jsx("div",{className:"space-y-4",children:N.map(s=>e.jsxs("div",{className:"flex items-start space-x-3 p-3 rounded-lg border",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx($,{className:"h-8 w-8 p-1 bg-blue-100 rounded-lg text-blue-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h4",{className:"text-sm font-medium truncate",children:s.title||`${s.agentType} conversation`}),e.jsx("span",{className:"text-xs text-muted-foreground",children:x(new Date(s.lastMessageAt),{addSuffix:!0})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(t,{variant:"outline",className:"text-xs",children:s.agentType}),e.jsx(t,{variant:s.isActive?"default":"secondary",className:"text-xs",children:s.isActive?"Active":"Archived"})]}),s.summary&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1 truncate",children:s.summary})]})]},s.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(p,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Conversations Yet"}),e.jsx("p",{className:"text-muted-foreground",children:"Start chatting with agents to see your conversation history here."})]})})})]})}),e.jsx(o,{value:"activity",children:e.jsxs(r,{children:[e.jsxs(l,{children:[e.jsxs(n,{className:"flex items-center gap-2",children:[e.jsx(y,{className:"h-5 w-5"}),"Recent Activity"]}),e.jsx(d,{children:"Your recent interactions and system activity"})]}),e.jsx(c,{children:e.jsx(h,{className:"h-96",children:j&&j.length>0?e.jsx("div",{className:"space-y-3",children:j.map(s=>e.jsxs("div",{className:"flex items-start space-x-3 p-3 rounded-lg border",children:[e.jsx("div",{className:"flex-shrink-0 mt-1",children:Q(s.activityType)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h4",{className:"text-sm font-medium",children:s.activityType.replace("_"," ").replace(/\b\w/g,i=>i.toUpperCase())}),e.jsx("span",{className:"text-xs text-muted-foreground",children:x(new Date(s.createdAt),{addSuffix:!0})})]}),s.agentType&&e.jsx(t,{variant:"outline",className:"text-xs mr-2",children:s.agentType}),s.details&&typeof s.details=="object"&&e.jsx("p",{className:"text-xs text-muted-foreground",children:JSON.stringify(s.details)})]})]},s.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(y,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Activity Yet"}),e.jsx("p",{className:"text-muted-foreground",children:"Your activity history will appear here as you use the platform."})]})})})]})}),e.jsx(o,{value:"projects",children:e.jsxs(r,{children:[e.jsxs(l,{children:[e.jsxs(n,{className:"flex items-center gap-2",children:[e.jsx(v,{className:"h-5 w-5"}),"Projects"]}),e.jsx(d,{children:"Your cannabis industry projects and formulations"})]}),e.jsx(c,{children:e.jsx(h,{className:"h-96",children:a.projects&&a.projects.length>0?e.jsx("div",{className:"space-y-4",children:a.projects.map(s=>e.jsxs("div",{className:"p-4 rounded-lg border",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"text-sm font-medium",children:s.name}),e.jsx(t,{variant:s.status==="active"?"default":"secondary",children:s.status})]}),s.description&&e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:s.description}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Created ",x(new Date(s.createdAt),{addSuffix:!0})]})]},s.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(v,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Projects Yet"}),e.jsx("p",{className:"text-muted-foreground",children:"Create your first project to get started with organized cannabis operations."})]})})})]})}),e.jsx(o,{value:"queries",children:e.jsxs(r,{children:[e.jsxs(l,{children:[e.jsxs(n,{className:"flex items-center gap-2",children:[e.jsx(g,{className:"h-5 w-5"}),"Recent Queries"]}),e.jsx(d,{children:"Your recent questions and agent interactions"})]}),e.jsx(c,{children:e.jsx(h,{className:"h-96",children:a.recentQueries&&a.recentQueries.length>0?e.jsx("div",{className:"space-y-4",children:a.recentQueries.map(s=>e.jsxs("div",{className:"p-4 rounded-lg border",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(t,{variant:"outline",children:s.agentType}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(t,{variant:s.status==="completed"?"default":"secondary",children:s.status}),s.confidenceScore&&e.jsxs(t,{variant:"outline",children:[Math.round(parseFloat(s.confidenceScore)),"% confidence"]})]})]}),e.jsx("p",{className:"text-sm mb-2 line-clamp-2",children:s.content}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Asked ",x(new Date(s.createdAt),{addSuffix:!0})]})]},s.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(g,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Queries Yet"}),e.jsx("p",{className:"text-muted-foreground",children:"Start asking questions to our AI agents to see your query history here."})]})})})]})})]})})]})]})}export{z as default};
