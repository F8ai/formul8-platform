import{s as L,r as i,t as M,m as A,v as E,j as e,C as n,d as c,w as g,a as d,A as R,x as T,b as o,f as m,B as h,M as U,y as q,z as b,U as $,p as z,D as B,G as K,E as P,n as V,H as F,J as G}from"./index-CDF1r-gK.js";import{S as _}from"./separator-CYAIRvWi.js";import{G as H}from"./git-branch-BC1FKsKt.js";function W(){const[,u]=L("/agent/:agentId"),j=u==null?void 0:u.agentId,[p,f]=i.useState([]),[r,y]=i.useState(""),[x,N]=i.useState(!1),v=i.useRef(null);M();const{data:a,isLoading:C}=A({queryKey:[`/api/agents/${j}/info`],enabled:!!j}),S=E({mutationFn:async s=>await G("/api/query",{method:"POST",body:JSON.stringify({query:s,agentType:j,context:{}})}),onSuccess:s=>{const t={id:Date.now().toString()+"-agent",type:"agent",content:s.response,timestamp:new Date,confidence:s.confidence,sources:s.sources,metadata:s.metadata};f(l=>[...l,t]),N(!1)},onError:s=>{const t={id:Date.now().toString()+"-error",type:"agent",content:"I encountered an error processing your request. Please try again.",timestamp:new Date,confidence:0};f(l=>[...l,t]),N(!1)}}),w=()=>{if(!r.trim()||x)return;const s={id:Date.now().toString()+"-user",type:"user",content:r,timestamp:new Date};f(t=>[...t,s]),N(!0),S.mutate(r),y("")},k=s=>{s.key==="Enter"&&!s.shiftKey&&(s.preventDefault(),w())};if(i.useEffect(()=>{var s;(s=v.current)==null||s.scrollIntoView({behavior:"smooth"})},[p]),C)return e.jsx("div",{className:"container mx-auto p-6",children:e.jsxs("div",{className:"flex items-center justify-center h-64",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"}),e.jsx("span",{className:"ml-2",children:"Loading agent..."})]})});if(!a)return e.jsx("div",{className:"container mx-auto p-6",children:e.jsx(n,{children:e.jsxs(c,{className:"p-8 text-center",children:[e.jsx(g,{className:"h-12 w-12 mx-auto mb-4 text-yellow-500"}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Agent Not Found"}),e.jsx("p",{className:"text-muted-foreground",children:"The requested agent could not be found."})]})})});const D=s=>s>=80?"text-green-600":s>=60?"text-yellow-600":"text-red-600",I=s=>s>=80?e.jsx(V,{className:"h-4 w-4"}):s>=60?e.jsx(g,{className:"h-4 w-4"}):e.jsx(F,{className:"h-4 w-4"});return e.jsxs("div",{className:"container mx-auto p-6 max-w-4xl",children:[e.jsx(n,{className:"mb-6",children:e.jsx(d,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(R,{className:"h-12 w-12",children:e.jsx(T,{className:"bg-blue-500 text-white",children:a.displayName.split(" ").map(s=>s[0]).join("")})}),e.jsxs("div",{children:[e.jsx(o,{className:"text-2xl",children:a.displayName}),e.jsx("p",{className:"text-muted-foreground",children:a.description})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(m,{variant:"outline",children:a.category}),e.jsx(h,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs("a",{href:a.repositoryUrl,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),"Repository"]})})]})]})})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"lg:col-span-3",children:e.jsxs(n,{className:"h-[600px] flex flex-col",children:[e.jsx(d,{children:e.jsxs(o,{className:"flex items-center",children:[e.jsx(U,{className:"h-5 w-5 mr-2"}),"Chat with ",a.displayName]})}),e.jsxs(c,{className:"flex-1 flex flex-col p-0",children:[e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[p.length===0&&e.jsxs("div",{className:"text-center text-muted-foreground py-8",children:[e.jsx(q,{className:"h-8 w-8 mx-auto mb-2"}),e.jsxs("p",{children:["Start a conversation with ",a.displayName]}),e.jsxs("p",{className:"text-sm mt-1",children:["Ask about cannabis ",a.category.toLowerCase()," topics"]})]}),p.map(s=>e.jsx("div",{className:`flex ${s.type==="user"?"justify-end":"justify-start"}`,children:e.jsx("div",{className:`max-w-[80%] rounded-lg p-3 ${s.type==="user"?"bg-blue-500 text-white":"bg-muted"}`,children:e.jsxs("div",{className:"flex items-start space-x-2",children:[s.type==="agent"&&e.jsx(b,{className:"h-4 w-4 mt-1 flex-shrink-0"}),s.type==="user"&&e.jsx($,{className:"h-4 w-4 mt-1 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"whitespace-pre-wrap",children:s.content}),s.type==="agent"&&s.confidence!==void 0&&e.jsxs("div",{className:`flex items-center mt-2 text-sm ${D(s.confidence)}`,children:[I(s.confidence),e.jsxs("span",{className:"ml-1",children:["Confidence: ",s.confidence,"%"]})]}),s.sources&&s.sources.length>0&&e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-xs font-medium mb-1",children:"Sources:"}),e.jsx("div",{className:"space-y-1",children:s.sources.map((t,l)=>e.jsx(m,{variant:"secondary",className:"text-xs mr-1",children:t},l))})]}),e.jsxs("div",{className:"flex items-center mt-2 text-xs opacity-70",children:[e.jsx(z,{className:"h-3 w-3 mr-1"}),s.timestamp.toLocaleTimeString()]})]})]})})},s.id)),x&&e.jsx("div",{className:"flex justify-start",children:e.jsx("div",{className:"bg-muted rounded-lg p-3 max-w-[80%]",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(b,{className:"h-4 w-4"}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]})})}),e.jsx("div",{ref:v})]}),e.jsx(_,{}),e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(B,{value:r,onChange:s=>y(s.target.value),onKeyPress:k,placeholder:`Ask ${a.displayName} about cannabis ${a.category.toLowerCase()}...`,className:"flex-1 min-h-[40px] max-h-[120px] resize-none",disabled:x}),e.jsx(h,{onClick:w,disabled:!r.trim()||x,size:"sm",children:e.jsx(K,{className:"h-4 w-4"})})]})})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(n,{children:[e.jsx(d,{children:e.jsx(o,{className:"text-lg",children:"Capabilities"})}),e.jsx(c,{children:e.jsx("div",{className:"space-y-2",children:a.capabilities.map(s=>e.jsx(m,{variant:"outline",className:"mr-1 mb-1",children:s},s))})})]}),e.jsxs(n,{children:[e.jsx(d,{children:e.jsx(o,{className:"text-lg",children:"Agent Status"})}),e.jsx(c,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Status"}),e.jsx(m,{variant:a.status==="active"?"default":"secondary",children:a.status})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Category"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:a.category})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Last Updated"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:new Date(a.lastUpdated).toLocaleDateString()})]})]})})]}),e.jsxs(n,{children:[e.jsx(d,{children:e.jsx(o,{className:"text-lg",children:"Development"})}),e.jsx(c,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(h,{variant:"outline",size:"sm",className:"w-full",asChild:!0,children:e.jsxs("a",{href:a.repositoryUrl,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(P,{className:"h-4 w-4 mr-2"}),"View Repository"]})}),e.jsx(h,{variant:"outline",size:"sm",className:"w-full",asChild:!0,children:e.jsxs("a",{href:`${a.repositoryUrl}/issues`,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(g,{className:"h-4 w-4 mr-2"}),"Report Issue"]})}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.jsx("p",{children:"This agent can be developed independently."}),e.jsxs("code",{className:"text-xs bg-muted p-1 rounded mt-1 block",children:["git clone ",a.repositoryUrl]})]})]})})]})]})]})]})}export{W as default};
