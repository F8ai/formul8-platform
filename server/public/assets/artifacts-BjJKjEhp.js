import{a4 as te,r as h,u as Q,t as R,m as T,J as p,v as D,j as e,B as m,an as E,bO as z,a3 as N,ao as M,ap as I,aq as $,bM as _,ag as J,o as ie,I as w,Y as L,_ as U,$ as V,a0 as B,a1 as o,C as b,a as K,d as C,b as Y,c as W,f as v,a8 as le,z as re,E as X,bP as ne,X as c,D as ce,T as de,i as oe,k as q,l as O}from"./index-B8YngC3q.js";import{U as me}from"./users-Dvk1p74L.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=te("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);function fe(){const[s,l]=h.useState(""),[n,i]=h.useState("all"),[d,x]=h.useState(!1),[g,r]=h.useState(null),[y,f]=h.useState(!1),{toast:u}=Q(),S=R(),{data:F=[],isLoading:a}=T({queryKey:["/api/artifacts",n],queryFn:()=>p(`/api/artifacts${n!=="all"?`?category=${n}`:""}`)}),{data:j=[]}=T({queryKey:["/api/artifacts/templates"],queryFn:()=>p("/api/artifacts/templates")}),{data:k=[]}=T({queryKey:["/api/artifacts/search",s],queryFn:()=>p(`/api/artifacts/search?q=${encodeURIComponent(s)}`),enabled:s.length>2}),A=D({mutationFn:()=>p("/api/artifacts/demo",{method:"POST"}),onSuccess:()=>{S.invalidateQueries({queryKey:["/api/artifacts"]}),u({title:"F8 Folder & Demo Artifacts Created",description:"✅ F8 folder created in Google Drive with cannabis industry documents shared with dcmcshan@mac.com"})},onError:()=>{u({title:"Error",description:"Failed to create demo artifacts.",variant:"destructive"})}}),G=D({mutationFn:()=>p("/api/artifacts/templates/cannabis/init",{method:"POST"}),onSuccess:()=>{S.invalidateQueries({queryKey:["/api/artifacts/templates"]}),u({title:"Cannabis Templates Created",description:"Professional cannabis industry templates are now available."})},onError:()=>{u({title:"Error",description:"Failed to create cannabis templates.",variant:"destructive"})}}),H=s.length>2?k:F,Z=[{value:"all",label:"All Categories"},{value:"compliance",label:"Compliance"},{value:"patent",label:"Patent/IP"},{value:"formulation",label:"Formulation"},{value:"marketing",label:"Marketing"},{value:"science",label:"Science"},{value:"operations",label:"Operations"},{value:"customer_success",label:"Customer Success"}],ee=t=>{switch(t){case"document":case"sop":case"patent_search":case"formulation":return e.jsx(N,{className:"h-5 w-5"});default:return e.jsx(N,{className:"h-5 w-5"})}},se=t=>{switch(t){case"active":return"bg-green-500";case"draft":return"bg-yellow-500";case"archived":return"bg-gray-500";default:return"bg-blue-500"}};return e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"My Artifacts"}),e.jsx("p",{className:"text-muted-foreground",children:"Documents, sheets, and forms that agents can read and modify"}),e.jsxs("div",{className:"mt-2 p-3 bg-green-50 border border-green-200 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-green-800 mb-2",children:"📁 F8 Folder System Ready"}),e.jsxs("p",{className:"text-sm text-green-700",children:["Google Workspace integration configured with service account: ",e.jsx("code",{className:"bg-green-100 px-1 rounded",children:"an-app@wired-trees-351713.iam.gserviceaccount.com"})]}),e.jsx("p",{className:"text-xs text-green-600 mt-1",children:'Click "Create F8 Folder & Demo Artifacts" to generate cannabis industry documents in your Google Drive'})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(m,{onClick:()=>G.mutate(),disabled:G.isPending,variant:"outline",children:"Create Cannabis Templates"}),e.jsx(m,{onClick:()=>A.mutate(),disabled:A.isPending,variant:"outline",children:A.isPending?"Creating F8 Folder...":"Create F8 Folder & Demo Artifacts"}),e.jsxs(E,{open:y,onOpenChange:f,children:[e.jsx(z,{asChild:!0,children:e.jsxs(m,{variant:"outline",children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),"From Template"]})}),e.jsxs(M,{className:"max-w-4xl",children:[e.jsxs(I,{children:[e.jsx($,{children:"Create from Template"}),e.jsx(_,{children:"Choose from professional cannabis industry templates"})]}),e.jsx(pe,{templates:j,onClose:()=>f(!1)})]})]}),e.jsxs(E,{open:d,onOpenChange:x,children:[e.jsx(z,{asChild:!0,children:e.jsxs(m,{children:[e.jsx(J,{className:"h-4 w-4 mr-2"}),"New Artifact"]})}),e.jsxs(M,{className:"max-w-2xl",children:[e.jsxs(I,{children:[e.jsx($,{children:"Create New Artifact"}),e.jsx(_,{children:"Create a new document, sheet, or form that agents can interact with."})]}),e.jsx(he,{onClose:()=>x(!1)})]})]})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(ie,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(w,{placeholder:"Search artifacts...",value:s,onChange:t=>l(t.target.value),className:"pl-10"})]})}),e.jsxs(L,{value:n,onValueChange:i,children:[e.jsx(U,{className:"w-48",children:e.jsx(V,{})}),e.jsx(B,{children:Z.map(t=>e.jsx(o,{value:t.value,children:t.label},t.value))})]})]}),a?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[...Array(6)].map((t,P)=>e.jsxs(b,{className:"animate-pulse",children:[e.jsxs(K,{children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]}),e.jsx(C,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-3 bg-gray-200 rounded"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-5/6"})]})})]},P))}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:H.map(t=>e.jsxs(b,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(K,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[ee(t.type),e.jsxs("div",{children:[e.jsx(Y,{className:"text-lg",children:t.title}),e.jsx(W,{className:"text-sm",children:t.description})]})]}),e.jsx(v,{className:`${se(t.status)} text-white`,children:t.status})]})}),e.jsxs(C,{className:"space-y-4",children:[e.jsx("div",{className:"flex flex-wrap gap-1",children:t.tags.map((P,ae)=>e.jsxs(v,{variant:"secondary",className:"text-xs",children:[e.jsx(xe,{className:"h-3 w-3 mr-1"}),P]},ae))}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(le,{className:"h-4 w-4"}),e.jsxs("span",{children:["v",t.version]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(me,{className:"h-4 w-4"}),e.jsxs("span",{children:[Object.keys(t.permissions).length," agents"]})]})]}),t.lastModifiedByAgent&&e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-blue-600",children:[e.jsx(re,{className:"h-4 w-4"}),e.jsxs("span",{children:["Last modified by ",t.lastModifiedByAgent]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"flex space-x-2",children:[t.googleDriveUrl&&e.jsx(m,{size:"sm",variant:"outline",onClick:()=>window.open(t.googleDriveUrl,"_blank"),children:e.jsx(X,{className:"h-4 w-4"})}),e.jsx(m,{size:"sm",variant:"outline",onClick:()=>r(t),children:e.jsx(ne,{className:"h-4 w-4"})})]}),e.jsx(v,{variant:"outline",className:"text-xs",children:t.category})]})]})]},t.id))}),H.length===0&&!a&&e.jsx(b,{className:"text-center py-12",children:e.jsxs(C,{children:[e.jsx(N,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No artifacts found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:s.length>2?"No artifacts match your search criteria.":"Create your first artifact to get started."}),e.jsxs(m,{onClick:()=>x(!0),children:[e.jsx(J,{className:"h-4 w-4 mr-2"}),"Create Artifact"]})]})}),g&&e.jsx(ue,{artifact:g,onClose:()=>r(null)})]})}function he({onClose:s}){const[l,n]=h.useState({title:"",description:"",type:"document",category:"compliance",createGoogleDoc:!0,tags:""}),{toast:i}=Q(),d=R(),x=D({mutationFn:r=>p("/api/artifacts",{method:"POST",body:JSON.stringify(r)}),onSuccess:()=>{d.invalidateQueries({queryKey:["/api/artifacts"]}),i({title:"Artifact Created",description:"Your artifact has been created successfully."}),s()},onError:()=>{i({title:"Error",description:"Failed to create artifact.",variant:"destructive"})}}),g=r=>{r.preventDefault();const y=l.tags.split(",").map(f=>f.trim()).filter(Boolean);x.mutate({...l,tags:y,content:{title:l.title,description:l.description,type:l.type},permissions:{[`${l.category}-agent`]:"write"}})};return e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"title",children:"Title"}),e.jsx(w,{id:"title",value:l.title,onChange:r=>n({...l,title:r.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"description",children:"Description"}),e.jsx(ce,{id:"description",value:l.description,onChange:r=>n({...l,description:r.target.value}),rows:3})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"type",children:"Type"}),e.jsxs(L,{value:l.type,onValueChange:r=>n({...l,type:r}),children:[e.jsx(U,{children:e.jsx(V,{})}),e.jsxs(B,{children:[e.jsx(o,{value:"document",children:"Document"}),e.jsx(o,{value:"sop",children:"SOP"}),e.jsx(o,{value:"patent_search",children:"Patent Search"}),e.jsx(o,{value:"formulation",children:"Formulation"}),e.jsx(o,{value:"marketing_sheet",children:"Marketing Sheet"}),e.jsx(o,{value:"form",children:"Form"})]})]})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"category",children:"Category"}),e.jsxs(L,{value:l.category,onValueChange:r=>n({...l,category:r}),children:[e.jsx(U,{children:e.jsx(V,{})}),e.jsxs(B,{children:[e.jsx(o,{value:"compliance",children:"Compliance"}),e.jsx(o,{value:"patent",children:"Patent/IP"}),e.jsx(o,{value:"formulation",children:"Formulation"}),e.jsx(o,{value:"marketing",children:"Marketing"}),e.jsx(o,{value:"science",children:"Science"}),e.jsx(o,{value:"operations",children:"Operations"}),e.jsx(o,{value:"customer_success",children:"Customer Success"})]})]})]})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"tags",children:"Tags (comma-separated)"}),e.jsx(w,{id:"tags",value:l.tags,onChange:r=>n({...l,tags:r.target.value}),placeholder:"cannabis, compliance, extraction"})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(m,{type:"button",variant:"outline",onClick:s,children:"Cancel"}),e.jsx(m,{type:"submit",disabled:x.isPending,children:x.isPending?"Creating...":"Create Artifact"})]})]})}function ue({artifact:s,onClose:l}){const{data:n=[]}=T({queryKey:["/api/artifacts",s.id,"history"],queryFn:()=>p(`/api/artifacts/${s.id}/history`)});return e.jsx(E,{open:!0,onOpenChange:l,children:e.jsxs(M,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(I,{children:[e.jsxs($,{className:"flex items-center space-x-2",children:[je(s.type),e.jsx("span",{children:s.title})]}),e.jsx(_,{children:s.description})]}),e.jsxs(de,{defaultValue:"details",className:"w-full",children:[e.jsxs(oe,{children:[e.jsx(q,{value:"details",children:"Details"}),e.jsx(q,{value:"permissions",children:"Permissions"}),e.jsx(q,{value:"history",children:"History"})]}),e.jsxs(O,{value:"details",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(c,{children:"Type"}),e.jsx("p",{className:"font-medium",children:s.type})]}),e.jsxs("div",{children:[e.jsx(c,{children:"Category"}),e.jsx("p",{className:"font-medium",children:s.category})]}),e.jsxs("div",{children:[e.jsx(c,{children:"Status"}),e.jsx(v,{className:`${ge(s.status)} text-white`,children:s.status})]}),e.jsxs("div",{children:[e.jsx(c,{children:"Version"}),e.jsxs("p",{className:"font-medium",children:["v",s.version]})]})]}),e.jsxs("div",{children:[e.jsx(c,{children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:s.tags.map((i,d)=>e.jsx(v,{variant:"secondary",children:i},d))})]}),s.googleDriveUrl&&e.jsxs("div",{children:[e.jsx(c,{children:"Google Drive Link"}),e.jsxs(m,{variant:"outline",className:"mt-1 w-full justify-start",onClick:()=>window.open(s.googleDriveUrl,"_blank"),children:[e.jsx(X,{className:"h-4 w-4 mr-2"}),"Open in Google Drive"]})]})]}),e.jsxs(O,{value:"permissions",className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(c,{children:"Agent Permissions"}),e.jsx("div",{className:"mt-2 space-y-2",children:Object.entries(s.permissions).map(([i,d])=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:i}),e.jsx(v,{variant:d==="write"?"default":"secondary",children:d})]},i))})]}),s.agentAccess.length>0&&e.jsxs("div",{children:[e.jsx(c,{children:"Recent Agent Access"}),e.jsx("div",{className:"mt-2 space-y-1",children:s.agentAccess.map((i,d)=>e.jsx("div",{className:"text-sm text-muted-foreground",children:i},d))})]})]}),e.jsx(O,{value:"history",className:"space-y-4",children:e.jsxs("div",{children:[e.jsx(c,{children:"Change History"}),e.jsx("div",{className:"mt-2 space-y-2",children:n.map(i=>e.jsx(b,{children:e.jsx(C,{className:"pt-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:i.changeType}),i.agentType&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["by ",i.agentType]}),i.changeReason&&e.jsx("p",{className:"text-sm",children:i.changeReason})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(i.createdAt).toLocaleString()}),i.newVersion&&e.jsxs("p",{className:"text-sm",children:["v",i.newVersion]})]})]})})},i.id))})]})})]})]})})}function je(s){return e.jsx(N,{className:"h-5 w-5"})}function pe({templates:s,onClose:l}){const[n,i]=h.useState(null),[d,x]=h.useState({}),[g,r]=h.useState(""),{toast:y}=Q(),f=R(),u=D({mutationFn:a=>p(`/api/artifacts/templates/${a.templateId}/create`,{method:"POST",body:JSON.stringify(a)}),onSuccess:()=>{f.invalidateQueries({queryKey:["/api/artifacts"]}),y({title:"Document Created",description:"Your document has been created from the template."}),l()},onError:()=>{y({title:"Error",description:"Failed to create document from template.",variant:"destructive"})}}),S=a=>{i(a),r(`${a.name} - ${new Date().toLocaleDateString()}`);const j={};a.variables.forEach(k=>{j[k]=""}),x(j)},F=a=>{a.preventDefault(),n&&u.mutate({templateId:n.id,title:g,variables:d})};return e.jsx("div",{className:"space-y-6",children:n?e.jsxs("form",{onSubmit:F,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"title",children:"Document Title"}),e.jsx(w,{id:"title",value:g,onChange:a=>r(a.target.value),required:!0})]}),n.variables.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Template Variables"}),n.variables.map(a=>e.jsxs("div",{children:[e.jsx(c,{htmlFor:a,children:a.replace(/_/g," ").replace(/\b\w/g,j=>j.toUpperCase())}),e.jsx(w,{id:a,value:d[a]||"",onChange:j=>x({...d,[a]:j.target.value}),placeholder:`Enter ${a.replace(/_/g," ")}`})]},a))]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(m,{type:"button",variant:"outline",onClick:()=>i(null),children:"Back to Templates"}),e.jsxs("div",{className:"space-x-2",children:[e.jsx(m,{type:"button",variant:"outline",onClick:l,children:"Cancel"}),e.jsx(m,{type:"submit",disabled:u.isPending,children:u.isPending?"Creating...":"Create Document"})]})]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(a=>e.jsxs(b,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>S(a),children:[e.jsxs(K,{children:[e.jsx(Y,{className:"text-lg",children:a.name}),e.jsx(W,{children:a.description})]}),e.jsx(C,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(v,{variant:"outline",children:a.category}),e.jsx(m,{size:"sm",variant:"outline",children:"Use Template"})]})})]},a.id))})})}function ge(s){switch(s){case"active":return"bg-green-500";case"draft":return"bg-yellow-500";case"archived":return"bg-gray-500";default:return"bg-blue-500"}}export{fe as default};
